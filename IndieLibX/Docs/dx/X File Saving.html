<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>X File Saving</title>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="Keywords" content="3D models, Direct3D. x files,  games programming, animation, skinning">


<link rel="stylesheet" type="text/css" href="X%20File%20Saving_tiedostot/fusion.css">
<link rel="stylesheet" type="text/css" href="X%20File%20Saving_tiedostot/style.css">
<link rel="stylesheet" type="text/css" href="X%20File%20Saving_tiedostot/site.css">
<style type="text/css" title="NOF_STYLE_SHEET">
body { margin:0px; text-align: center }
.nof-centerContent { margin:0px auto; text-align: left; width:970px }
</style>



</head>
<body class="nof-centerBody">
    <div class="nof-centerContent">
        <div class="nof-positioning">
            <div class="nof-positioning" style="width: 966px; margin-left: 2px; ">
                <div id="LayoutRegion1" class="nof-lyr nof-clearfix" style="padding-bottom:4px;">
                    <div class="nof-positioning">
                        <div class="nof-positioning" style="line-height: 0px; width: 966px; "><a id="Picture584A" href="http://www.toymaker.info/Games/index.html"><img id="Picture584" src="X%20File%20Saving_tiedostot/ToymakerBanner.png" alt="BannerLeft" title="BannerLeft" width="966" height="86"></a></div>
                        <div class="nof-positioning" style="width: 837px; margin-top: 8px; ">
                            <ul id="NavigationBar1" style="z-index: 1000; display: block; visibility: visible; width: 837px; height: 22px;" class="NavBar_ul">
                                <li id="NavigationButton11" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1001; height: 22px;"><a href="http://www.toymaker.info/Games/index.html" title="DirectX Index" style="line-height: 0" class="NavBar_a"><img alt="DirectX Index" title="DirectX Index" src="X%20File%20Saving_tiedostot/DirectX-Index_Nregular_1_2.gif" border="0"></a></li>
                                <li id="NavigationButton12" class="NavBar_li" style="left: 93px; top: 0px; z-index: 1001; height: 22px;"><a href="http://www.toymaker.info/Games/html/beginners.html" title="Beginners" style="line-height: 0" class="NavBar_a"><img alt="Beginners" title="Beginners" src="X%20File%20Saving_tiedostot/Beginners_Nregular_1_2.gif" border="0"></a></li>
                                <li id="NavigationButton13" class="NavBar_li" style="left: 186px; top: 0px; z-index: 1001; height: 22px;"><a href="http://www.toymaker.info/Games/html/graphics.html" title="Graphics" style="line-height: 0" class="NavBar_a"><img alt="Graphics" title="Graphics" src="X%20File%20Saving_tiedostot/Graphics_Hhighlighted_1_1.gif" border="0"></a>
                                    <ul id="NavigationBar1_1" style="top: 0px; left: 0px; z-index: 1001; display: none; visibility: visible; width: 93px; height: 110px;" class="NavBar_ul">
                                        <li id="NavigationButton21" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1002; height: 22px;"><a href="http://www.toymaker.info/Games/html/getting_started.html" title="Getting Started" style="line-height: 0" class="NavBar_a"><img alt="Getting Started" title="Getting Started" src="X%20File%20Saving_tiedostot/Getting-Started_Nregular_1_1.gif" border="0"></a>
                                            <ul id="NavigationBar1_2" style="top: -22px; left: 93px; z-index: 1002; display: none; visibility: visible; width: 93px; height: 88px;" class="NavBar_ul">
                                                <li id="NavigationButton22" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/directx_q_a.html" title="DirectX Q&amp;A" style="line-height: 0" class="NavBar_a"><img alt="DirectX Q&amp;A" title="DirectX Q&amp;A" src="X%20File%20Saving_tiedostot/DirectX-Q-A_Nregular_1_1.gif" border="0"></a>
                                                    <ul id="NavigationBar1_3" style="top: -22px; left: 93px; z-index: 1003; display: none; visibility: visible; width: 93px; height: 22px;" class="NavBar_ul">
                                                        <li id="NavigationButton23" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/directx_9_0c.html" title="DirectX 9.0c" style="line-height: 0" class="NavBar_a"><img alt="DirectX 9.0c" title="DirectX 9.0c" src="X%20File%20Saving_tiedostot/DirectX-9.gif" border="0"></a>
                                                            <ul id="NavigationBar1_4" style="top: -22px; left: 93px; z-index: 1004; display: none; visibility: visible; width: 93px; height: 22px;" class="NavBar_ul">
                                                                <li id="NavigationButton24" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1005; height: 22px;"><a href="http://www.toymaker.info/Games/html/d3dx_dlls.html" title="D3DX DLLs" style="line-height: 0" class="NavBar_a"><img alt="D3DX DLLs" title="D3DX DLLs" src="X%20File%20Saving_tiedostot/D3DX-DLLs_Nregular_1_1.gif" border="0"></a></li>
                                                            </ul>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li id="NavigationButton25" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/windows_api.html" title="Windows API" style="line-height: 0" class="NavBar_a"><img alt="Windows API" title="Windows API" src="X%20File%20Saving_tiedostot/Windows-API_Nregular_1_1.gif" border="0"></a>
                                                    <ul id="NavigationBar1_5" style="top: -22px; left: 93px; z-index: 1003; display: none; visibility: visible; width: 93px; height: 66px;" class="NavBar_ul">
                                                        <li id="NavigationButton26" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/winmain.html" title="WinMain" style="line-height: 0" class="NavBar_a"><img alt="WinMain" title="WinMain" src="X%20File%20Saving_tiedostot/WinMain_Nregular_1_1.gif" border="0"></a></li>
                                                        <li id="NavigationButton27" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/wndproc.html" title="WndProc" style="line-height: 0" class="NavBar_a"><img alt="WndProc" title="WndProc" src="X%20File%20Saving_tiedostot/WndProc_Nregular_1_1.gif" border="0"></a></li>
                                                        <li id="NavigationButton28" class="NavBar_li" style="left: 0px; top: 44px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/advanced.html" title="Advanced" style="line-height: 0" class="NavBar_a"><img alt="Advanced" title="Advanced" src="X%20File%20Saving_tiedostot/Advanced_Nregular_1_1.gif" border="0"></a>
                                                            <ul id="NavigationBar1_6" style="top: -22px; left: 93px; z-index: 1004; display: none; visibility: visible; width: 93px; height: 66px;" class="NavBar_ul">
                                                                <li id="NavigationButton29" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1005; height: 22px;"><a href="http://www.toymaker.info/Games/html/gdi.html" title="GDI" style="line-height: 0" class="NavBar_a"><img alt="GDI" title="GDI" src="X%20File%20Saving_tiedostot/GDI_Nregular_1_1.gif" border="0"></a></li>
                                                                <li id="NavigationButton30" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1005; height: 22px;"><a href="http://www.toymaker.info/Games/html/sound.html" title="Sound" style="line-height: 0" class="NavBar_a"><img alt="Sound" title="Sound" src="X%20File%20Saving_tiedostot/Sound_Nregular_1_1.gif" border="0"></a></li>
                                                                <li id="NavigationButton31" class="NavBar_li" style="left: 0px; top: 44px; z-index: 1005; height: 22px;"><a href="http://www.toymaker.info/Games/html/resources.html" title="Resources" style="line-height: 0" class="NavBar_a"><img alt="Resources" title="Resources" src="X%20File%20Saving_tiedostot/Resources_Nregular_1_1.gif" border="0"></a></li>
                                                            </ul>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li id="NavigationButton32" class="NavBar_li" style="left: 0px; top: 44px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/d3d_setup.html" title="D3D Setup" style="line-height: 0" class="NavBar_a"><img alt="D3D Setup" title="D3D Setup" src="X%20File%20Saving_tiedostot/D3D-Setup_Nregular_1_1.gif" border="0"></a></li>
                                                <li id="NavigationButton33" class="NavBar_li" style="left: 0px; top: 66px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/2d_elements.html" title="2D Elements" style="line-height: 0" class="NavBar_a"><img alt="2D Elements" title="2D Elements" src="X%20File%20Saving_tiedostot/2D-Elements_Nregular_1_1.gif" border="0"></a>
                                                    <ul id="NavigationBar1_7" style="top: -22px; left: 93px; z-index: 1003; display: none; visibility: visible; width: 93px; height: 66px;" class="NavBar_ul">
                                                        <li id="NavigationButton34" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/textures.html" title="Textures" style="line-height: 0" class="NavBar_a"><img alt="Textures" title="Textures" src="X%20File%20Saving_tiedostot/Textures_Nregular_1_1.gif" border="0"></a></li>
                                                        <li id="NavigationButton35" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/sprites.html" title="Sprites" style="line-height: 0" class="NavBar_a"><img alt="Sprites" title="Sprites" src="X%20File%20Saving_tiedostot/Sprites_Nregular_1_1.gif" border="0"></a></li>
                                                        <li id="NavigationButton36" class="NavBar_li" style="left: 0px; top: 44px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/text.html" title="Text" style="line-height: 0" class="NavBar_a"><img alt="Text" title="Text" src="X%20File%20Saving_tiedostot/Text_Nregular_1_1.gif" border="0"></a></li>
                                                    </ul>
                                                </li>
                                            </ul>
                                        </li>
                                        <li id="NavigationButton37" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1002; height: 22px;"><a href="http://www.toymaker.info/Games/html/3d_rendering.html" title="3D Rendering" style="line-height: 0" class="NavBar_a"><img alt="3D Rendering" title="3D Rendering" src="X%20File%20Saving_tiedostot/3D-Rendering_Nregular_1_1.gif" border="0"></a>
                                            <ul id="NavigationBar1_8" style="top: -22px; left: 93px; z-index: 1002; display: none; visibility: visible; width: 93px; height: 198px;" class="NavBar_ul">
                                                <li id="NavigationButton38" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/primitives.html" title="Primitives" style="line-height: 0" class="NavBar_a"><img alt="Primitives" title="Primitives" src="X%20File%20Saving_tiedostot/Primitives_Nregular_1_1.gif" border="0"></a>
                                                    <ul id="NavigationBar1_9" style="top: -22px; left: 93px; z-index: 1003; display: none; visibility: visible; width: 93px; height: 66px;" class="NavBar_ul">
                                                        <li id="NavigationButton39" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/fvf.html" title="FVF" style="line-height: 0" class="NavBar_a"><img alt="FVF" title="FVF" src="X%20File%20Saving_tiedostot/FVF_Nregular_1_1.gif" border="0"></a></li>
                                                        <li id="NavigationButton40" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/buffers.html" title="Buffers" style="line-height: 0" class="NavBar_a"><img alt="Buffers" title="Buffers" src="X%20File%20Saving_tiedostot/Buffers_Nregular_1_1.gif" border="0"></a></li>
                                                        <li id="NavigationButton41" class="NavBar_li" style="left: 0px; top: 44px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/rendering_steps.html" title="Rendering Steps" style="line-height: 0" class="NavBar_a"><img alt="Rendering Steps" title="Rendering Steps" src="X%20File%20Saving_tiedostot/Rendering-Steps_Nregular_1_1.gif" border="0"></a></li>
                                                    </ul>
                                                </li>
                                                <li id="NavigationButton42" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/z_buffer.html" title="Z Buffer" style="line-height: 0" class="NavBar_a"><img alt="Z Buffer" title="Z Buffer" src="X%20File%20Saving_tiedostot/Z-Buffer_Nregular_1_1.gif" border="0"></a></li>
                                                <li id="NavigationButton43" class="NavBar_li" style="left: 0px; top: 44px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/matrices.html" title="Matrices" style="line-height: 0" class="NavBar_a"><img alt="Matrices" title="Matrices" src="X%20File%20Saving_tiedostot/Matrices_Nregular_1_1.gif" border="0"></a></li>
                                                <li id="NavigationButton44" class="NavBar_li" style="left: 0px; top: 66px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/lighting.html" title="Lighting" style="line-height: 0" class="NavBar_a"><img alt="Lighting" title="Lighting" src="X%20File%20Saving_tiedostot/Lighting_Nregular_1_1.gif" border="0"></a>
                                                    <ul id="NavigationBar1_10" style="top: -22px; left: 93px; z-index: 1003; display: none; visibility: visible; width: 93px; height: 22px;" class="NavBar_ul">
                                                        <li id="NavigationButton45" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/materials.html" title="Materials" style="line-height: 0" class="NavBar_a"><img alt="Materials" title="Materials" src="X%20File%20Saving_tiedostot/Materials_Nregular_1_1.gif" border="0"></a></li>
                                                    </ul>
                                                </li>
                                                <li id="NavigationButton46" class="NavBar_li" style="left: 0px; top: 88px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/3d_models.html" title="3D Models" style="line-height: 0" class="NavBar_a"><img alt="3D Models" title="3D Models" src="X%20File%20Saving_tiedostot/3D-Models_Nregular_1_1.gif" border="0"></a>
                                                    <ul id="NavigationBar1_11" style="top: -22px; left: 93px; z-index: 1003; display: none; visibility: visible; width: 93px; height: 88px;" class="NavBar_ul">
                                                        <li id="NavigationButton47" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/x_file_saving.html" title="X File Saving" style="line-height: 0" class="NavBar_a"><img alt="X File Saving" title="X File Saving" src="X%20File%20Saving_tiedostot/X-File-Saving_Nregular_1_1.gif" border="0"></a></li>
                                                        <li id="NavigationButton48" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/x_file_loading.html" title="X File Loading" style="line-height: 0" class="NavBar_a"><img alt="X File Loading" title="X File Loading" src="X%20File%20Saving_tiedostot/X-File-Loading_Nregular_1_1.gif" border="0"></a>
                                                            <ul id="NavigationBar1_12" style="top: -22px; left: 93px; z-index: 1004; display: none; visibility: visible; width: 93px; height: 44px;" class="NavBar_ul">
                                                                <li id="NavigationButton49" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1005; height: 22px;"><a href="http://www.toymaker.info/Games/html/load_x_simply.html" title="Load X Simply" style="line-height: 0" class="NavBar_a"><img alt="Load X Simply" title="Load X Simply" src="X%20File%20Saving_tiedostot/Load-X-Simply_Nregular_1_1.gif" border="0"></a></li>
                                                                <li id="NavigationButton50" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1005; height: 22px;"><a href="http://www.toymaker.info/Games/html/load_x_hierarchy.html" title="Load X Hierarchy" style="line-height: 0" class="NavBar_a"><img alt="Load X Hierarchy" title="Load X Hierarchy" src="X%20File%20Saving_tiedostot/Load-X-Hierarchy_Nregular_1_1.gif" border="0"></a></li>
                                                            </ul>
                                                        </li>
                                                        <li id="NavigationButton51" class="NavBar_li" style="left: 0px; top: 44px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/xanimator.html" title="XAnimator" style="line-height: 0" class="NavBar_a"><img alt="XAnimator" title="XAnimator" src="X%20File%20Saving_tiedostot/XAnimator_Nregular_1_1.gif" border="0"></a></li>
                                                        <li id="NavigationButton52" class="NavBar_li" style="left: 0px; top: 66px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/xfileeditor.html" title="XFileEditor" style="line-height: 0" class="NavBar_a"><img alt="XFileEditor" title="XFileEditor" src="X%20File%20Saving_tiedostot/XFileEditor_Nregular_1_1.gif" border="0"></a></li>
                                                    </ul>
                                                </li>
                                                <li id="NavigationButton53" class="NavBar_li" style="left: 0px; top: 110px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/states.html" title="States" style="line-height: 0" class="NavBar_a"><img alt="States" title="States" src="X%20File%20Saving_tiedostot/States_Nregular_1_1.gif" border="0"></a>
                                                    <ul id="NavigationBar1_13" style="top: -22px; left: 93px; z-index: 1003; display: none; visibility: visible; width: 93px; height: 66px;" class="NavBar_ul">
                                                        <li id="NavigationButton54" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/render_states.html" title="Render States" style="line-height: 0" class="NavBar_a"><img alt="Render States" title="Render States" src="X%20File%20Saving_tiedostot/Render-States_Nregular_1_1.gif" border="0"></a></li>
                                                        <li id="NavigationButton55" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/sampler_states.html" title="Sampler States" style="line-height: 0" class="NavBar_a"><img alt="Sampler States" title="Sampler States" src="X%20File%20Saving_tiedostot/Sampler-States_Nregular_1_1.gif" border="0"></a></li>
                                                        <li id="NavigationButton56" class="NavBar_li" style="left: 0px; top: 44px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/texture_states.html" title="Texture States" style="line-height: 0" class="NavBar_a"><img alt="Texture States" title="Texture States" src="X%20File%20Saving_tiedostot/Texture-States_Nregular_1_1.gif" border="0"></a></li>
                                                    </ul>
                                                </li>
                                                <li id="NavigationButton57" class="NavBar_li" style="left: 0px; top: 132px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/effects_files.html" title="Effects Files" style="line-height: 0" class="NavBar_a"><img alt="Effects Files" title="Effects Files" src="X%20File%20Saving_tiedostot/Effects-Files_Nregular_1_1.gif" border="0"></a></li>
                                                <li id="NavigationButton58" class="NavBar_li" style="left: 0px; top: 154px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/shaders.html" title="Shaders" style="line-height: 0" class="NavBar_a"><img alt="Shaders" title="Shaders" src="X%20File%20Saving_tiedostot/Shaders_Nregular_1_1.gif" border="0"></a>
                                                    <ul id="NavigationBar1_14" style="top: -22px; left: 93px; z-index: 1003; display: none; visibility: visible; width: 93px; height: 44px;" class="NavBar_ul">
                                                        <li id="NavigationButton59" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/vertex_shaders.html" title="Vertex Shaders" style="line-height: 0" class="NavBar_a"><img alt="Vertex Shaders" title="Vertex Shaders" src="X%20File%20Saving_tiedostot/Vertex-Shaders_Nregular_1_1.gif" border="0"></a></li>
                                                        <li id="NavigationButton60" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/pixel_shaders.html" title="Pixel Shaders" style="line-height: 0" class="NavBar_a"><img alt="Pixel Shaders" title="Pixel Shaders" src="X%20File%20Saving_tiedostot/Pixel-Shaders_Nregular_1_1.gif" border="0"></a></li>
                                                    </ul>
                                                </li>
                                                <li id="NavigationButton61" class="NavBar_li" style="left: 0px; top: 176px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/d3d_resources.html" title="D3D Res" style="line-height: 0" class="NavBar_a"><img alt="D3D Res" title="D3D Res" src="X%20File%20Saving_tiedostot/D3D-Res_Nregular_1_1.gif" border="0"></a></li>
                                            </ul>
                                        </li>
                                        <li id="NavigationButton62" class="NavBar_li" style="left: 0px; top: 44px; z-index: 1002; height: 22px;"><a href="http://www.toymaker.info/Games/html/graphic_techniques.html" title="Graphic Techniques" style="line-height: 0" class="NavBar_a"><img alt="Graphic Techniques" title="Graphic Techniques" src="X%20File%20Saving_tiedostot/Graphic-Techniques_Nregular_1_1.gif" border="0"></a>
                                            <ul id="NavigationBar1_15" style="top: -22px; left: 93px; z-index: 1002; display: none; visibility: visible; width: 93px; height: 132px;" class="NavBar_ul">
                                                <li id="NavigationButton63" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/collisions.html" title="Collisions" style="line-height: 0" class="NavBar_a"><img alt="Collisions" title="Collisions" src="X%20File%20Saving_tiedostot/Collisions_Nregular_1_1.gif" border="0"></a></li>
                                                <li id="NavigationButton64" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/skybox.html" title="Skybox" style="line-height: 0" class="NavBar_a"><img alt="Skybox" title="Skybox" src="X%20File%20Saving_tiedostot/Skybox_Nregular_1_1.gif" border="0"></a></li>
                                                <li id="NavigationButton65" class="NavBar_li" style="left: 0px; top: 44px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/camera.html" title="Camera" style="line-height: 0" class="NavBar_a"><img alt="Camera" title="Camera" src="X%20File%20Saving_tiedostot/Camera_Nregular_1_1.gif" border="0"></a></li>
                                                <li id="NavigationButton66" class="NavBar_li" style="left: 0px; top: 66px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/terrain.html" title="Terrain" style="line-height: 0" class="NavBar_a"><img alt="Terrain" title="Terrain" src="X%20File%20Saving_tiedostot/Terrain_Nregular_1_1.gif" border="0"></a></li>
                                                <li id="NavigationButton67" class="NavBar_li" style="left: 0px; top: 88px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/picking.html" title="Picking" style="line-height: 0" class="NavBar_a"><img alt="Picking" title="Picking" src="X%20File%20Saving_tiedostot/Picking_Nregular_1_1.gif" border="0"></a></li>
                                                <li id="NavigationButton68" class="NavBar_li" style="left: 0px; top: 110px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/screen_quad.html" title="Screen Quad" style="line-height: 0" class="NavBar_a"><img alt="Screen Quad" title="Screen Quad" src="X%20File%20Saving_tiedostot/Screen-Quad_Nregular_1_1.gif" border="0"></a></li>
                                            </ul>
                                        </li>
                                        <li id="NavigationButton69" class="NavBar_li" style="left: 0px; top: 66px; z-index: 1002; height: 22px;"><a href="http://www.toymaker.info/Games/html/invisible_geometry.html" title="Invisible Geometry" style="line-height: 0" class="NavBar_a"><img alt="Invisible Geometry" title="Invisible Geometry" src="X%20File%20Saving_tiedostot/Invisible-Geometry_Nregular_1_1.gif" border="0"></a></li>
                                        <li id="NavigationButton70" class="NavBar_li" style="left: 0px; top: 88px; z-index: 1002; height: 22px;"><a href="http://www.toymaker.info/Games/html/direct3d_faq.html" title="Direct3D FAQ" style="line-height: 0" class="NavBar_a"><img alt="Direct3D FAQ" title="Direct3D FAQ" src="X%20File%20Saving_tiedostot/Direct3D-FAQ_Nregular_1_1.gif" border="0"></a></li>
                                    </ul>
                                </li>
                                <li id="NavigationButton14" class="NavBar_li" style="left: 279px; top: 0px; z-index: 1001; height: 22px;"><a href="http://www.toymaker.info/Games/html/input.html" title="Input" style="line-height: 0" class="NavBar_a"><img alt="Input" title="Input" src="X%20File%20Saving_tiedostot/Input_Nregular_1_2.gif" border="0"></a>
                                    <ul id="NavigationBar1_16" style="top: 0px; left: 0px; z-index: 1001; display: none; visibility: visible; width: 93px; height: 66px;" class="NavBar_ul">
                                        <li id="NavigationButton71" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1002; height: 22px;"><a href="http://www.toymaker.info/Games/html/directinput.html" title="DirectInput" style="line-height: 0" class="NavBar_a"><img alt="DirectInput" title="DirectInput" src="X%20File%20Saving_tiedostot/DirectInput_Nregular_1_1.gif" border="0"></a></li>
                                        <li id="NavigationButton72" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1002; height: 22px;"><a href="http://www.toymaker.info/Games/html/xinput.html" title="XInput" style="line-height: 0" class="NavBar_a"><img alt="XInput" title="XInput" src="X%20File%20Saving_tiedostot/XInput_Nregular_1_1.gif" border="0"></a></li>
                                        <li id="NavigationButton73" class="NavBar_li" style="left: 0px; top: 44px; z-index: 1002; height: 22px;"><a href="http://www.toymaker.info/Games/html/raw_input.html" title="Raw Input" style="line-height: 0" class="NavBar_a"><img alt="Raw Input" title="Raw Input" src="X%20File%20Saving_tiedostot/Raw-Input_Nregular_1_1.gif" border="0"></a></li>
                                    </ul>
                                </li>
                                <li id="NavigationButton15" class="NavBar_li" style="left: 372px; top: 0px; z-index: 1001; height: 22px;"><a href="http://www.toymaker.info/Games/html/video__music.html" title="AV" style="line-height: 0" class="NavBar_a"><img alt="AV" title="AV" src="X%20File%20Saving_tiedostot/AV_Nregular_1_2.gif" border="0"></a>
                                    <ul id="NavigationBar1_17" style="top: 0px; left: 0px; z-index: 1001; display: none; visibility: visible; width: 93px; height: 66px;" class="NavBar_ul">
                                        <li id="NavigationButton74" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1002; height: 22px;"><a href="http://www.toymaker.info/Games/html/sound1.html" title="Sound" style="line-height: 0" class="NavBar_a"><img alt="Sound" title="Sound" src="X%20File%20Saving_tiedostot/Sound_Nregular_1_1.gif" border="0"></a>
                                            <ul id="NavigationBar1_18" style="top: -22px; left: 93px; z-index: 1002; display: none; visibility: visible; width: 93px; height: 66px;" class="NavBar_ul">
                                                <li id="NavigationButton75" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/xact.html" title="XACT" style="line-height: 0" class="NavBar_a"><img alt="XACT" title="XACT" src="X%20File%20Saving_tiedostot/XACT_Nregular_1_1.gif" border="0"></a>
                                                    <ul id="NavigationBar1_19" style="top: -22px; left: 93px; z-index: 1003; display: none; visibility: visible; width: 93px; height: 44px;" class="NavBar_ul">
                                                        <li id="NavigationButton76" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/xact_content_driven.html" title="XACT Content Driven" style="line-height: 0" class="NavBar_a"><img alt="XACT Content Driven" title="XACT Content Driven" src="X%20File%20Saving_tiedostot/XACT-Content-Driven_Nregular_1_1.gif" border="0"></a></li>
                                                        <li id="NavigationButton77" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/xact_code_driven.html" title="XACT Code Driven" style="line-height: 0" class="NavBar_a"><img alt="XACT Code Driven" title="XACT Code Driven" src="X%20File%20Saving_tiedostot/XACT-Code-Driven_Nregular_1_1.gif" border="0"></a></li>
                                                    </ul>
                                                </li>
                                                <li id="NavigationButton78" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/wave_files.html" title="WAVE files" style="line-height: 0" class="NavBar_a"><img alt="WAVE files" title="WAVE files" src="X%20File%20Saving_tiedostot/WAVE-files_Nregular_1_1.gif" border="0"></a></li>
                                                <li id="NavigationButton79" class="NavBar_li" style="left: 0px; top: 44px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/directsound.html" title="DirectSound" style="line-height: 0" class="NavBar_a"><img alt="DirectSound" title="DirectSound" src="X%20File%20Saving_tiedostot/DirectSound_Nregular_1_1.gif" border="0"></a></li>
                                            </ul>
                                        </li>
                                        <li id="NavigationButton80" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1002; height: 22px;"><a href="http://www.toymaker.info/Games/html/simple_playback.html" title="Simple Playback" style="line-height: 0" class="NavBar_a"><img alt="Simple Playback" title="Simple Playback" src="X%20File%20Saving_tiedostot/Simple-Playback_Nregular_1_1.gif" border="0"></a></li>
                                        <li id="NavigationButton81" class="NavBar_li" style="left: 0px; top: 44px; z-index: 1002; height: 22px;"><a href="http://www.toymaker.info/Games/html/main_window_video.html" title="Window Video" style="line-height: 0" class="NavBar_a"><img alt="Window Video" title="Window Video" src="X%20File%20Saving_tiedostot/Window-Video_Nregular_1_1.gif" border="0"></a></li>
                                    </ul>
                                </li>
                                <li id="NavigationButton16" class="NavBar_li" style="left: 465px; top: 0px; z-index: 1001; height: 22px;"><a href="http://www.toymaker.info/Games/html/languages.html" title="Languages" style="line-height: 0" class="NavBar_a"><img alt="Languages" title="Languages" src="X%20File%20Saving_tiedostot/Languages_Nregular_1_2.gif" border="0"></a>
                                    <ul id="NavigationBar1_20" style="top: 0px; left: 0px; z-index: 1001; display: none; visibility: visible; width: 93px; height: 44px;" class="NavBar_ul">
                                        <li id="NavigationButton82" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1002; height: 22px;"><a href="http://www.toymaker.info/Games/html/c__.html" title="C++" style="line-height: 0" class="NavBar_a"><img alt="C++" title="C++" src="X%20File%20Saving_tiedostot/C--_Nregular_1_1.gif" border="0"></a>
                                            <ul id="NavigationBar1_21" style="top: -22px; left: 93px; z-index: 1002; display: none; visibility: visible; width: 93px; height: 110px;" class="NavBar_ul">
                                                <li id="NavigationButton83" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/macros.html" title="Macros" style="line-height: 0" class="NavBar_a"><img alt="Macros" title="Macros" src="X%20File%20Saving_tiedostot/Macros_Nregular_1_1.gif" border="0"></a></li>
                                                <li id="NavigationButton84" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/debugger.html" title="Debugger" style="line-height: 0" class="NavBar_a"><img alt="Debugger" title="Debugger" src="X%20File%20Saving_tiedostot/Debugger_Nregular_1_1.gif" border="0"></a></li>
                                                <li id="NavigationButton85" class="NavBar_li" style="left: 0px; top: 44px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/patterns.html" title="Patterns" style="line-height: 0" class="NavBar_a"><img alt="Patterns" title="Patterns" src="X%20File%20Saving_tiedostot/Patterns_Nregular_1_1.gif" border="0"></a></li>
                                                <li id="NavigationButton86" class="NavBar_li" style="left: 0px; top: 66px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/string_handling.html" title="String Handling" style="line-height: 0" class="NavBar_a"><img alt="String Handling" title="String Handling" src="X%20File%20Saving_tiedostot/String-Handling_Nregular_1_1.gif" border="0"></a></li>
                                                <li id="NavigationButton87" class="NavBar_li" style="left: 0px; top: 88px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/libraries.html" title="Libraries" style="line-height: 0" class="NavBar_a"><img alt="Libraries" title="Libraries" src="X%20File%20Saving_tiedostot/Libraries_Nregular_1_1.gif" border="0"></a></li>
                                            </ul>
                                        </li>
                                        <li id="NavigationButton88" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1002; height: 22px;"><a href="http://www.toymaker.info/Games/html/c_.html" title="C#" style="line-height: 0" class="NavBar_a"><img alt="C#" title="C#" src="X%20File%20Saving_tiedostot/C-_Nregular_1_1.gif" border="0"></a></li>
                                    </ul>
                                </li>
                                <li id="NavigationButton17" class="NavBar_li" style="left: 558px; top: 0px; z-index: 1001; height: 22px;"><a href="http://www.toymaker.info/Games/html/techniques.html" title="Techniques" style="line-height: 0" class="NavBar_a"><img alt="Techniques" title="Techniques" src="X%20File%20Saving_tiedostot/Techniques_Nregular_1_2.gif" border="0"></a>
                                    <ul id="NavigationBar1_22" style="top: 0px; left: 0px; z-index: 1001; display: none; visibility: visible; width: 93px; height: 88px;" class="NavBar_ul">
                                        <li id="NavigationButton89" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1002; height: 22px;"><a href="http://www.toymaker.info/Games/html/2d_games.html" title="2D Games" style="line-height: 0" class="NavBar_a"><img alt="2D Games" title="2D Games" src="X%20File%20Saving_tiedostot/2D-Games_Nregular_1_1.gif" border="0"></a>
                                            <ul id="NavigationBar1_23" style="top: -22px; left: 93px; z-index: 1002; display: none; visibility: visible; width: 93px; height: 44px;" class="NavBar_ul">
                                                <li id="NavigationButton90" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/2d_-_directx.html" title="2D &amp; DirectX" style="line-height: 0" class="NavBar_a"><img alt="2D &amp; DirectX" title="2D &amp; DirectX" src="X%20File%20Saving_tiedostot/2D---DirectX_Nregular_1_1.gif" border="0"></a>
                                                    <ul id="NavigationBar1_24" style="top: -22px; left: 93px; z-index: 1003; display: none; visibility: visible; width: 93px; height: 44px;" class="NavBar_ul">
                                                        <li id="NavigationButton91" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/2d_scrolling.html" title="2D Scrolling" style="line-height: 0" class="NavBar_a"><img alt="2D Scrolling" title="2D Scrolling" src="X%20File%20Saving_tiedostot/2D-Scrolling_Nregular_1_1.gif" border="0"></a></li>
                                                        <li id="NavigationButton92" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/2d_animation.html" title="2D Animation" style="line-height: 0" class="NavBar_a"><img alt="2D Animation" title="2D Animation" src="X%20File%20Saving_tiedostot/2D-Animation_Nregular_1_1.gif" border="0"></a></li>
                                                    </ul>
                                                </li>
                                                <li id="NavigationButton93" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1003; height: 22px;"><a href="http://www.toymaker.info/Games/html/low_level_2d.html" title="Low Level 2D" style="line-height: 0" class="NavBar_a"><img alt="Low Level 2D" title="Low Level 2D" src="X%20File%20Saving_tiedostot/Low-Level-2D_Nregular_1_1.gif" border="0"></a>
                                                    <ul id="NavigationBar1_25" style="top: -22px; left: 93px; z-index: 1003; display: none; visibility: visible; width: 93px; height: 132px;" class="NavBar_ul">
                                                        <li id="NavigationButton94" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/colour_formats.html" title="Colour Formats" style="line-height: 0" class="NavBar_a"><img alt="Colour Formats" title="Colour Formats" src="X%20File%20Saving_tiedostot/Colour-Formats_Nregular_1_1.gif" border="0"></a></li>
                                                        <li id="NavigationButton95" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/pitch__stride.html" title="Pitch / Stride" style="line-height: 0" class="NavBar_a"><img alt="Pitch / Stride" title="Pitch / Stride" src="X%20File%20Saving_tiedostot/Pitch---Stride_Nregular_1_1.gif" border="0"></a></li>
                                                        <li id="NavigationButton96" class="NavBar_li" style="left: 0px; top: 44px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/colour_fill.html" title="Colour Fill" style="line-height: 0" class="NavBar_a"><img alt="Colour Fill" title="Colour Fill" src="X%20File%20Saving_tiedostot/Colour-Fill_Nregular_1_1.gif" border="0"></a></li>
                                                        <li id="NavigationButton97" class="NavBar_li" style="left: 0px; top: 66px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/set_pixel.html" title="Set Pixel" style="line-height: 0" class="NavBar_a"><img alt="Set Pixel" title="Set Pixel" src="X%20File%20Saving_tiedostot/Set-Pixel_Nregular_1_1.gif" border="0"></a></li>
                                                        <li id="NavigationButton98" class="NavBar_li" style="left: 0px; top: 88px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/blitting.html" title="Blitting" style="line-height: 0" class="NavBar_a"><img alt="Blitting" title="Blitting" src="X%20File%20Saving_tiedostot/Blitting_Nregular_1_1.gif" border="0"></a></li>
                                                        <li id="NavigationButton99" class="NavBar_li" style="left: 0px; top: 110px; z-index: 1004; height: 22px;"><a href="http://www.toymaker.info/Games/html/clipping.html" title="Clipping" style="line-height: 0" class="NavBar_a"><img alt="Clipping" title="Clipping" src="X%20File%20Saving_tiedostot/Clipping_Nregular_1_1.gif" border="0"></a></li>
                                                    </ul>
                                                </li>
                                            </ul>
                                        </li>
                                        <li id="NavigationButton100" class="NavBar_li" style="left: 0px; top: 22px; z-index: 1002; height: 22px;"><a href="http://www.toymaker.info/Games/html/64_bit.html" title="64 Bit" style="line-height: 0" class="NavBar_a"><img alt="64 Bit" title="64 Bit" src="X%20File%20Saving_tiedostot/64-Bit_Nregular_1_1.gif" border="0"></a></li>
                                        <li id="NavigationButton101" class="NavBar_li" style="left: 0px; top: 44px; z-index: 1002; height: 22px;"><a href="http://www.toymaker.info/Games/html/terrain_follow.html" title="Terrain Follow" style="line-height: 0" class="NavBar_a"><img alt="Terrain Follow" title="Terrain Follow" src="X%20File%20Saving_tiedostot/Terrain-Follow_Nregular_1_1.gif" border="0"></a></li>
                                        <li id="NavigationButton102" class="NavBar_li" style="left: 0px; top: 66px; z-index: 1002; height: 22px;"><a href="http://www.toymaker.info/Games/html/3d_collisions.html" title="3D Collisions" style="line-height: 0" class="NavBar_a"><img alt="3D Collisions" title="3D Collisions" src="X%20File%20Saving_tiedostot/3D-Collisions_Nregular_1_1.gif" border="0"></a></li>
                                    </ul>
                                </li>
                                <li id="NavigationButton18" class="NavBar_li" style="left: 651px; top: 0px; z-index: 1001; height: 22px;"><a href="http://www.toymaker.info/Games/html/glossary.html" title="Glossary" style="line-height: 0" class="NavBar_a"><img alt="Glossary" title="Glossary" src="X%20File%20Saving_tiedostot/Glossary_Nregular_1_2.gif" border="0"></a></li>
                                <li id="NavigationButton19" class="NavBar_li" style="left: 744px; top: 0px; z-index: 1001; height: 22px;"><a href="http://www.toymaker.info/html/books.html" title="Books" style="line-height: 0" class="NavBar_a"><img alt="Books" title="Books" src="X%20File%20Saving_tiedostot/Books_Nregular_1.gif" border="0"></a></li>
                            </ul>
                        </div>
                        <div id="Text51" class="nof-positioning TextObject" style="width: 966px; margin-top: 9px; ">
                            <p style="text-align: left; margin-bottom: 0px;"><!--GOOGLE_START-->

<!-- ResponsiveMay16 -->
<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4289333574056980" data-ad-slot="4000294001" data-ad-format="auto"></ins>
<!--GOOGLE_END-->&nbsp;</p>
                        </div>
                        <div class="nof-positioning" style="width: 119px; margin-top: 5px; ">
                            <ul id="NavigationBar2" style="z-index: 1000; display: block; visibility: visible; width: 119px; height: 30px;" class="NavBar_ul">
                                <li id="NavigationButton20" class="NavBar_li" style="left: 0px; top: 0px; z-index: 1001; height: 30px;"><a href="http://www.toymaker.info/Games/html/3d_models.html" title="3D Models" style="line-height: 0" class="NavBar_a"><img alt="3D Models" title="3D Models" src="X%20File%20Saving_tiedostot/3D-Models_Ns_regular2.png" border="0"></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div id="Text43" class="nof-positioning TextObject" style="width: 966px; margin-top: 4px; margin-left: 2px; height: 6062px; background-color: rgb(255,255,255); ">
                <h1>X File Saving</h1>
                <h2>Introduction to X file saving</h2>
                <p>This page describes how you can save your own mesh 
data in the .x file format maintaining a mesh hierarchy. If you are not 
interested in keeping the hierarchy you can simply use the <span class="Code">D3DXSaveMeshToX</span> function. The page is split into the following:</p>
                <ol>
                    <li><a href="#Objects">The Objects</a></li>
                    <li><a href="#s1">Step 1 - Creating the X file object and registering templates</a></li>
                    <li><a href="#s2">Step 2 - Creating the save object</a></li>
                    <li><a href="#s3">Step 3 - Adding our top level data</a></li>
                    <li><a href="#s4">Step 4 - Adding mesh data</a></li>
                    <li><a href="#s5">Step 5 - Finishing off</a></li>
                    <li><a href="#con">Conclusions</a></li>
                </ol>
                <p>These notes refer to the new X file interfaces first introduced in the December 2004 update of the <a id="Text43Link8" href="#" onmouseover="stm(Text[12],Style[1])" onmouseout="htm()"><span style="color: rgb(153,0,0);">SDK</span></a>. The old interfaces still work but are now marked as deprecated.</p>
                <p><i>Note</i>: there is very little information on the 
Internet or in the DirectX SDK about loading and saving .x files. You 
may find some notes that use the old interfaces but as far as I can tell
 my notes are the only ones anywhere using the new interfaces. Since 
there is so little information in the DirectX SDK help I have had to do a
 certain amount of reverse engineering and trial and error so it is 
possible I may have done things incorrectly in places. However you can 
be sure the code below works fine. If more information becomes available
 I will of course update these notes.</p>
                <p>The old legacy interfaces were:</p>
                <ul>
                    <li class="Code">IDirectXFile</li>
                    <ul>
                        <li class="Code">Pointer type: LPDIRECTXFILE</li>
                    </ul>
                    <li class="Code">IDirectXFileData</li>
                    <ul>
                        <li class="Code">Pointer type: LPDIRECTXFILEDATA</li>
                    </ul>
                    <li class="Code">IDirectXFileObject</li>
                    <ul>
                        <li class="Code">Pointer type: LPDIRECTXFILEOBJECT</li>
                    </ul>
                    <li class="Code">IDirectXFileSaveObject</li>
                    <ul>
                        <li class="Code">Pointer type: LPDIRECTXFILESAVEOBJECT</li>
                    </ul>
                    <li class="Code">IDirectXFileBinary</li>
                    <ul>
                        <li class="Code">Pointer type: LPDIRECTXFILEBINARY</li>
                    </ul>
                    <li class="Code">IDirectXFileDataReference</li>
                    <ul>
                        <li class="Code">Pointer type: LPDIRECTXFILEDATAREFERENCE</li>
                    </ul>
                    <li class="Code">IDirectXFileEnumObject</li>
                    <ul>
                        <li class="Code">Pointer type: LPDIRECTXFILEENUMOBJECT</li>
                    </ul>
                </ul>
                <p>The new interfaces are:</p>
                <ul>
                    <li class="Code">ID3DXFile</li>
                    <ul>
                        <li class="Code">Pointer type: LPD3DXFILE</li>
                    </ul>
                    <li class="Code">ID3DXFileData</li>
                    <ul>
                        <li class="Code">Pointer type: LPD3DXFILEDATA</li>
                    </ul>
                    <li class="Code">ID3DXFileEnumObject</li>
                    <ul>
                        <li class="Code">Pointer type: LPD3DXFILEENUMOBJECT</li>
                    </ul>
                    <li class="Code">ID3DXFileSaveData</li>
                    <ul>
                        <li class="Code">Pointer type: LPD3DXFILESAVEDATA</li>
                    </ul>
                    <li class="Code">ID3DXFileSaveObject</li>
                    <ul>
                        <li class="Code">Pointer type: LPD3DXFILESAVEOBJECT</li>
                    </ul>
                </ul>
                <p>The pointer type is just used to ease typing since you generally use a pointer to these interface classes. For example <span class="Code">LPD3DXFILE</span> is defined like this:</p>
                <p><span class="Code">typedef ID3DXFile* LPD3DXFILE;</span></p>
                <p>In these notes I will not use these typedefs as I find they confuse people, instead I will use the full pointer declaration.</p>
                <h2><a name="Objects"></a>The X file Objects</h2>
                <p>X file saving involves the use of a number of DirectX
 objects. These provide the interfaces to allow us to assemble the data 
to save. As with all of DirectX we get DirectX to create these objects 
for us and then use their interfaces. The objects required here are:</p>
                <p><span class="Code">ID3DXFile</span> - used to create other objects (<span class="Code">ID3DXFileEnumObject</span> and <span class="Code">ID3DXFileSaveObject</span>)
 and also to register templates. The .x file format is flexible allowing
 user defined data to be stored. For this reason it uses the concepts of
 templates to define the make up of the data. There are a number of 
default templates for the most common data provided with the SDK.</p>
                <p><span class="Code">ID3DXFileSaveData</span> - allows us to add data objects as children to a .x file data node.</p>
                <p><span class="Code">ID3DXFileSaveObject</span> - allows us to add data objects and templates to the .x file and also to save the .x file to disk.</p>
                <p>The interfaces <span class="Code">ID3DXFileEnumObject</span> and <span class="Code">ID3DXFileData</span> are not used for saving but are used in <a href="http://www.toymaker.info/Games/html/load_x_hierarchy.html">loading .x files</a>.</p>
                <h2><a name="s1"></a>Step 1 - Creating the X File object and registering templates</h2>
                <p>The first step is to obtain an instance of an <span class="Code">ID3DXFile</span>.
 As usual with DirectX we do this by declaring a pointer to this type 
and passing the address of the pointer to a Direct3D function. Direct3D 
will then create an instance and point our pointer to it. We then have 
access to all the required functions.</p>
                <p><span class="Code">ID3DXFile* xFile=NULL;<br>HRESULT hr=D3DXFileCreate(&amp;xFile );</span></p>
                <p>If this succeeds (always remember to check the 
HRESULT returned for error conditions, for clarity I miss these checks 
from the calls below but you would be wise to do them) the next step is 
to specify the templates we want to use in our .x file.</p>
                <p><span class="Code">xFile-&gt;RegisterTemplates( (void*)D3DRM_XTEMPLATES,D3DRM_XTEMPLATE_BYTES ) ;</span></p>
                <p>Here we are registering the standard templates for 
saving model data. These templates are defined in the header file 
rmxftmpl.h so this header will need including. More detail on what data 
these allow us to save is detailed later. In addition there are some 
other templates provided for skinning use:</p>
                <p><span class="Code">xFile-&gt;RegisterTemplates((void*)XSKINEXP_TEMPLATES, strlen(XSKINEXP_TEMPLATES)); </span></p>
                <p>There are also a set of templates that have been added more recently by Microsoft called <span class="Code">XEXTENSIONS_TEMPLATES</span>. As I mentioned earlier you can also create your own custom templates but this is beyond the scope of these notes.</p>
                <h2><a name="s2"></a>Step 2 - Creating the save object</h2>
                <p>The next step is to create a save object (<span class="Code">ID3DXFileSaveObject</span>) where we can start building our data. We use the <span class="Code">ID3DXFile</span> object to create this object:</p>
                <p><span class="Code">ID3DXFileSaveObject</span>*<span class="Code"> xFileSave=NULL;<br>xFile-&gt;CreateSaveObject(filename , flags, format,&nbsp; &amp;xFileSave);</span></p>
                <p>The first parameter is the filename you wish to use and the second is flags to determine the character set of the filename (<span class="Code">D3DXF_FILESAVE_TOFILE</span> or <span class="Code">D3DXF_FILESAVE_TOWFILE</span>
 for use of wide characters). Format is used to specify if you want to 
save the file in binary, text and/or compressed. The final parameter is 
the address of a <span class="Code">ID3DXFileSaveObject</span> pointer that, if the call is successful, will point to a new instance. So an example of creating a save object to save to <span class="Code">'test.x'</span> in compressed binary would be:</p>
                <p><span class="Code">xFile-&gt;CreateSaveObject("test.x"
 , D3DXF_FILESAVE_TOFILE, D3DXF_FILEFORMAT_BINARY | 
DXFILEFORMAT_COMPRESSED,&nbsp; &amp;xFileSave);</span></p>
                <p>Now that we have our save object created we can start adding our data.</p>
                <h2><a name="s3"></a>Step 3 - adding our top level data</h2>
                <p>It is usual to write data to the file with a frame hierarchy (see the example of a hierarchy for a person here: <a href="http://www.toymaker.info/Games/html/load_x_hierarchy.html">x file animation</a>).
 So we need to build our data by creating frames and adding child frames
 and mesh. For each frame we can specify a transformation. This 
describes how the frame is transformed relative to it's parent frame.</p>
                <p>What I like to do is add a root frame and then add a 
frame for each set of mesh data. The Microsoft example files do not 
always do this but I like this method as it eases the creation of a 
hierarchy.</p>
                <p>It is easy to get confused between the file save data interface (<span class="Code">ID3DXFileSaveData</span>) and the file save object interface (<span class="Code">ID3DXFileSaveObject</span>) as they have similar functionality. Basically the <span class="Code">ID3DXFileSaveObject</span>
 interfaces control the adding of data to the .x file itself, this 
allows you to add many things at the top level. In practice I simply add
 to this a default frame with a transformation matrix and from then on 
add to a <span class="Code">ID3DXFileSaveData</span>. The <span class="Code">ID3DXFileSaveData</span> once attached to the save frame can be added to using it's interfaces.</p>
                <p>So lets create our top level frame to hang everything else from:</p>
                <p><span class="Code">ID3DXFileSaveData *xFileSaveRoot=NULL;<br>hr = xFileSave-&gt;AddDataObject(TID_D3DRMFrame, "Scene_Root_Frame", NULL, 0, NULL, &amp;xFileSaveRoot);</span></p>
                <p>The <span class="Code">AddDataObject</span> method provided by both <span class="Code">ID3DXFileSaveData</span> and <span class="Code">ID3DXFileSaveObject</span>
 allows different types of data to be added. Since the .x file format is
 meant to be flexible and allow additions all types of data are 
described via the use of templates. In the first step above we 
registered the default templates which provide a number of common types 
including: frames, matrix and mesh. Each type is referred to using a 
globally unique identifier (<span class="Code">GUID</span>) e.g.</p>
                <ul>
                    <li class="Code">TID_D3DRMFrame - data describing a frame</li>
                    <li class="Code">TID_D3DRMFrameTransformMatrix- a transformation matrix</li>
                    <li class="Code">TID_D3DRMMesh - mesh data</li>
                    <li class="Code">TID_D3DRMMeshNormals - mesh normal data</li>
                    <li class="Code">TID_D3DRMMeshTextureCoords - mesh texture co-ordinates</li>
                    <li class="Code">TID_D3DRMMeshMaterialList - material list</li>
                    <li class="Code">TID_D3DRMMaterial - one material</li>
                    <li class="Code">TID_D3DRMTextureFilename - a texture filename</li>
                </ul>
                <p><i>Note</i>: there are more of these, these are just the most commonly used ones. Look in <span class="Code">rmxfguid.h</span> for a full list. You can also create your own custom ones if required.</p>
                <p>The first parameter of <span class="Code">AddDataObject</span>
 is where we specify the data template we want to use. The second 
parameter&nbsp; is a name. You can specify this or not - it is up to 
you. The third parameter is where we can specify a <span class="Code">GUID</span> for the data object itself or <span class="Code">NULL</span> if it does not have one (normally the case). The next two parameters specify the data itself. Since <span class="Code">AddObject</span>
 can work with any type of data we simply specify the size of the data 
in bytes and a void pointer to the data. The last parameter is the 
return from the function. Here we provide the address of a new object 
that will be created from the call. For both the <span class="Code">ID3DXFileSaveData</span> call and the <span class="Code">ID3DXFileSaveObject</span> the returned object is a <span class="Code">ID3DXFileSaveData</span> object.</p>
                <p>We can now forget about the <span class="Code">ID3DXFileSaveObject</span> until the final step of writing to disk as we have added our root <span class="Code">ID3DXFileSaveData</span> to it and everything else will be added to this (or to it's children). </p>
                <p>So far we have just created a top level frame, we now
 want to build on this. If you want to specify the transformation of the
 exported data you will want to add a transform matrix in here. We add 
this object to our newly created <span class="Code">xFileRootObject</span>.</p>
                <p>The data for a transform matrix is held in 16 floats. I use the following simple code to fill it from a <span class="Code">D3DXMATRIX</span> called <span class="Code">matWorld:</span></p>
                <p><span class="Code">DWORD size=16*sizeof(float);<br>size_t *pbData=new float[16];</span></p>
                <p><span class="Code">int count=0;<br>for (int y=0;y&lt;4;y++)<br>{<br>&nbsp;&nbsp;&nbsp; for (int x=0;x&lt;4;x++) <br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pbData[count]=matWorld.m[x][y];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; count++;<br>&nbsp;&nbsp;&nbsp; }<br>}</span></p>
                <p>We can now add our transformation data:</p>
                <p><span class="Code">ID3DXFileSaveData *pRootTransform = NULL;<br>xFileSaveRoot-&gt;AddDataObject(TID_D3DRMFrameTransformMatrix,<br>&nbsp;&nbsp; "Root_Transform_Matrix", NULL, size, pbData,&amp;pRootTransform);</span></p>
                <h2><a name="s4"></a>Step 4 - Adding Mesh Data</h2>
                <p>I normally create a new frame per mesh. It may be 
that you only have one mesh in your data but if you have more you may 
wish to set a transformation matrix per frame. For each mesh I am going 
to save I will add a root frame and transformation matrix. </p>
                <p>Once we have written our .x file we can load it into 
mesh viewer (comes with the SDK) to check it is correct. You can examine
 the hierarchy and for what I am describing it should look like this:</p>
                <p><img id="Picture16" src="X%20File%20Saving_tiedostot/xfile103.jpg" alt="xfile103" title="xfile103" class="nof-align-top" style="vertical-align: top;" width="179" height="80"></p>
                <p>If I save more than one mesh per 3D object it looks like this (without the mesh frames expanded):</p>
                <p><img id="Picture17" src="X%20File%20Saving_tiedostot/xfile202.jpg" alt="x file hierarchy" title="x file hierarchy" class="nof-align-top" style="vertical-align: top;" width="156" height="331"></p>
                <p>Below is the code I use to add the root frame for each mesh:</p>
                <p><span class="Code">// Loop for each mesh (I am holding them in a vector here)<br>for (i=0;i&lt;(int)m_meshVector.size();i++)<br>{<br>&nbsp; // create a unique name for each mesh frame<br>&nbsp; char buf[256];<br>&nbsp; sprintf(buf,"MeshFrame_%d",i);</span></p>
                <p><span class="Code">&nbsp;&nbsp; ID3DXFileSaveData *xFileMeshData=NULL;<br>&nbsp;&nbsp; hr = xFileSaveRoot-&gt;AddDataObject(TID_D3DRMFrame, buf, NULL, 0, NULL, &amp;xFileMeshData);</span></p>
                <p>We have now created a uniquely named frame to which we can add all our mesh data e.g. positions, normals, texture co-ordinates.</p>
                <h3>Writing the mesh position data</h3>
                <p>The pattern of adding objects carries on as already 
described. You have to be a bit careful to make sure your data is laid 
out correctly and that data sizes are correct etc. below is the 
calculation I use to determine size when saving mesh data with vertex 
position and indices:</p>
                <p><span class="Code">DWORD byteSize=sizeof(DWORD)+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // num verts<br>&nbsp;&nbsp;&nbsp; 3*sizeof(float)*m_numVerts+&nbsp;&nbsp;&nbsp;&nbsp; // the verts themselves<br>&nbsp;&nbsp;&nbsp;
 
sizeof(DWORD)+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 // num faces<br>&nbsp;&nbsp;&nbsp; 
m_numTris*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 // each tri<br>&nbsp;&nbsp;&nbsp; 
(sizeof(DWORD)+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 // number of verts per tri<br>&nbsp;&nbsp;&nbsp; 
3*sizeof(DWORD));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 // the three vertex index</span></p>
                <p>I then create some room for it all and stream the data into it in the following order:</p>
                <ol>
                    <li>Number of vertices</li>
                    <li>For each vertex: the vertex position</li>
                    <li>Number of triangles</li>
                    <li>For each triangle the number of indices (3) and then each index</li>
                </ol>
                <p>I then add this data</p>
                <p><span class="Code">ID3DXFileSaveData * meshDataObject = NULL;<br>HRESULT hr = xFileMeshData-&gt;AddDataObject(TID_D3DRMMesh, "Mesh_Data",NULL,byteSize,pbData, &amp;meshDataObject); </span></p>
                <p>Important: the normals, material lists and textures should all be added to this new meshDataObject.</p>
                <h3>Writing the mesh normal data</h3>
                <p>Normal data is added to the <span class="Code">meshDataObject</span>.
 As well as streaming the normal vectors we also need to specify which 
faces the normals belong to. Normal data should be in the following 
format:</p>
                <ol>
                    <li>Number of normals</li>
                    <li>For each normal: the normal x,y.z values</li>
                    <li>Number of triangles</li>
                    <li>For each triangle: how many normals (3) and then each vertex index</li>
                </ol>
                <p>As usual add this to <span class="Code">meshDataObject</span> using the <span class="Code">AddDataObject</span> method. You will need to provide a new <span class="Code">ID3DXFileSaveData</span> object but after adding the data you have no further use of it (so release it).</p>
                <h3>Writing the materials</h3>
                <p>We can write a list of materials used by our 
triangles. We specify for every triangle which material it uses. The 
following data is written:</p>
                <ol>
                    <li>Number of materials</li>
                    <li>Number of faces</li>
                    <li>For each face which material it uses</li>
                </ol>
                <p>After adding this data object using <span class="Code">TID_D3DRMMeshMaterialList</span> we can then add a description of each material. Note: we add these as children of the returned material list <span class="Code">AddObject</span> object.</p>
                <p>For each material we write:</p>
                <ol>
                    <li>Diffuse colour</li>
                    <li>Power</li>
                    <li>Specular colour</li>
                    <li>Emissive colour</li>
                </ol>
                <p><i>Note:</i> there is no ambient colour hence the 
normal process of assigning of the diffuse to the ambient component when
 loading a .x file.</p>
                <p>After adding this material to our material list 
object we get back a material object. If we wish to specify a texture 
file for the material we add this to the material object e.g.</p>
                <p><span class="Code">ID3DXFileSaveData * textureObject = NULL;<br>hr
 = materialObject-&gt;AddDataObject(TID_D3DRMTextureFilename, NULL, 
NULL,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 byteSize, charStr, &amp;textureObject);</span></p>
                <p>Where <span class="Code">charStr</span> is a character string and <span class="Code">byteSize</span> is calculated as: </p>
                <p><span class="Code">byteSize = sizeof(char)*(strlen(charStr)+1);</span></p>
                <p>We have now finished writing out our materials so can
 release the material list object, the material objects and the texture 
objects.</p>
                <h3>Writing the texture co-ordinates</h3>
                <p>Texture co-ordinates are quite straight forward you specify:</p>
                <ol>
                    <li>Number of texture co-ordinates</li>
                    <li>Each coordinate (2 floats)</li>
                </ol>
                <h2><a name="s5"></a>Step 5 - Finishing Off</h2>
                <p>I have described above the main data types you will 
want to write to a .x file but note that there are many more that are 
beyond the scope of these notes. Once you have finished adding objects 
the last thing to do is to save to disk, you use your original <span class="Code">ID3DXFileSaveObject:</span></p>
                <p><span class="Code">xFileSave-&gt;Save();</span></p>
                <h2><a name="con"></a>X file saving conclusions</h2>
                <p style="margin-bottom: 0px;">X files are unfortunately
 far from simple to use. This is mainly because the format is meant to 
be flexible and so is based on the use of templates (the Microsoft 
documentation is not exactly helpful either). Hopefully these notes will
 prevent others from going through the struggle of understanding x files
 that I had to!</p>
            </div>
            <div id="Text37" class="nof-positioning TextObject" style="width: 966px; margin-top: 5px; margin-left: 2px; text-align: center; ">
                <p style="text-align: center; margin-bottom: 0px;">
<!-- TextMay16 -->
<ins class="adsbygoogle" style="display:inline-block;width:728px;height:15px" data-ad-client="ca-pub-4289333574056980" data-ad-slot="4793552809"></ins>
<br></p><hr id="HRRule3" style="text-align:center;width:100%;height:2px;"><b><span style="font-size: 12px; font-weight: bold;">© 2004-2016 Keith Ditchburn</span></b><p></p>
            </div>
        </div>
    </div>


 </body></html>