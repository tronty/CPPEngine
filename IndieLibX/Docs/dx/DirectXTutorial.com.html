<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>DirectXTutorial.com</title><link href="DirectXTutorial.com_tiedostot/Layout.css" rel="Stylesheet" type="text/css"><link href="DirectXTutorial.com_tiedostot/Black.css" rel="Stylesheet" type="text/css"></head><body><a href="http://www.directxtutorial.com/default.aspx"><img src="DirectXTutorial.com_tiedostot/HeadLogo.png" alt="DirectXTutorial.com"></a><div class="logoscript">The Ultimate DirectX Tutorial</div><div class="logout"><a class="mainlink" href="http://www.directxtutorial.com/signin.aspx?retloc=lesson.aspx&amp;lessonid=9-4-7">Sign In</a></div><div class="sidebar"><div class="sidepanel"><div><b>Navigation</b><br><br><a class="sidelink" href="http://www.directxtutorial.com/default.aspx">Home</a><br><a class="sidelink" href="http://www.directxtutorial.com/LessonList.aspx?listid=111">DirectX for Windows 8</a><br><a class="sidelinkin1" href="http://www.directxtutorial.com/LessonList.aspx?listid=112">DirectX 11.2</a><br><a class="sidelinkin1" href="http://www.directxtutorial.com/LessonList.aspx?listid=111">DirectX 11.1</a><br><a class="sidelink" href="http://www.directxtutorial.com/LegacyList.aspx">DirectX for Desktop</a><br><a class="sidelinkin1" href="http://www.directxtutorial.com/LessonList.aspx?listid=11">DirectX 11</a><br><a class="sidelinkin1" href="http://www.directxtutorial.com/LessonList.aspx?listid=9">DirectX 9</a><br><a class="sidelink" href="http://www.directxtutorial.com/lessonarticle.aspx?id=2">Useful Resources</a><br><a class="sidelink" href="http://www.directxtutorial.com/lessonarticle.aspx?id=1">About DirectXTutorial</a><br><a class="sidelink" href="http://www.directxtutorial.com/TPremium.aspx">DirectXTutorial Premium</a><br><a class="sidelink" href="http://www.directxtutorial.com/testimonials.aspx">Testimonials</a><br></div></div><br><div class="sidepanel"><div><b>Contact</b><br><br>Contact me here:<br><span style="font-size:11px;">Twitter: <a class="mainlink" href="https://twitter.com/#%21/dastopher">@dastopher</a><br>Email: chris@directxtutorial.com<br></span><br>Or leave me feedback:<br><span style="font-size:11px;"><a href="" class="mainlink" onclick="RunFeedback(); return false;">Quick Feedback</a></span><br></div></div><br></div><div class="titlebar">Lesson 7: Simple Modeling</div><div class="entrybox"><div class="navbar"><div class="prevbar"><a class="mainlink" href="http://www.directxtutorial.com/Lesson.aspx?lessonid=9-4-6">Previous</a></div><div class="nextbar"><a class="mainlink" href="http://www.directxtutorial.com/Lesson.aspx?lessonid=9-4-8">Next</a></div></div><div class="entryheader" style="position:relative;">Lesson Overview</div><div class="maintext" style="position: relative;"><p>So
 far we have only built single triangles.  Sometimes (such as in the 
last lesson) we have gotten advanced and drawn two triangles, but they 
were not connected.</p><p>3D models are made out of many triangles 
connected together to form geometry.  In this lesson, we will cover how 
to build some simple geometry out of triangles, and how to move them, 
rotate them and size them as a whole.  </p></div><div class="entryheader" style="position:relative;">Building a Quad</div><div class="maintext" style="position: relative;"><p>Quad, as we should all know, means four.  In geometry, a quad is a four-sided shape of any kind.  The following are each quads.</p><center><img alt="Various Quads" src="DirectXTutorial.com_tiedostot/1.png" width="491" height="82"><br><br>Various Quads</center><p>Earlier
 I said that triangles make up all shapes in a 3D world.  If you look 
carefully, each of these quads is made up of two triangles placed side 
by side.</p><center><img alt="Quads Are Dual Triangles" src="DirectXTutorial.com_tiedostot/2.png" width="491" height="82"><br><br>Quads Are Dual Triangles</center><p>As
 a matter of fact, this is true of all quads, regardless of shape.  
These two triangles combined can make quite a variety of useful shapes 
in game programming, such as building terrain, walls, boxes, and any 
other shape with four sides.</p><p>The prime question is, how do you 
make them?  We are already familiar with building triangles, so now 
let's look at how that code could be changed to draw a square instead.  
First, let's look at the init_graphics() function we were using earlier.
  This time, it has been changed to represent a quad, rather than a 
triangle.  Notice there are four points here.  The changes, as usual, 
are in <b>bold</b>.</p><div class="codebox">//&nbsp;this&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;puts&nbsp;the&nbsp;3D&nbsp;models&nbsp;into&nbsp;video&nbsp;RAM<br>void&nbsp;init_graphics(void)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;create&nbsp;the&nbsp;vertices&nbsp;using&nbsp;the&nbsp;CUSTOMVERTEX&nbsp;struct<br>&nbsp;&nbsp;&nbsp;&nbsp;CUSTOMVERTEX&nbsp;vertices[]&nbsp;=&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{&nbsp;-3.0f,&nbsp;3.0f,&nbsp;0.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;0,&nbsp;255),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;3.0f,&nbsp;3.0f,&nbsp;0.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;0),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;-3.0f,&nbsp;-3.0f,&nbsp;0.0f,&nbsp;D3DCOLOR_XRGB(255,&nbsp;0,&nbsp;0),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;3.0f,&nbsp;-3.0f,&nbsp;0.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;255),&nbsp;},</b><br>&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;create&nbsp;a&nbsp;vertex&nbsp;buffer&nbsp;interface&nbsp;called&nbsp;i_buffer<br>&nbsp;&nbsp;&nbsp;&nbsp;d3ddev-&gt;CreateVertexBuffer(<b>4*sizeof(CUSTOMVERTEX),</b>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;change&nbsp;to&nbsp;4,&nbsp;instead&nbsp;of&nbsp;3<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CUSTOMFVF,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DPOOL_MANAGED,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;v_buffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;VOID*&nbsp;pVoid;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;a&nbsp;void&nbsp;pointer<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;lock&nbsp;v_buffer&nbsp;and&nbsp;load&nbsp;the&nbsp;vertices&nbsp;into&nbsp;it<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v_buffer-&gt;Lock(0,&nbsp;0,&nbsp;(void**)&amp;pVoid,&nbsp;0);<br>&nbsp;&nbsp;&nbsp;&nbsp;memcpy(pVoid,&nbsp;vertices,&nbsp;sizeof(vertices));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v_buffer-&gt;Unlock();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;return;<br>}</div><p>Now
 we have a full square in memory.  Now how do we show it?  Let's take a 
look at the code that draws them from the render_frame() function.</p><div class="codebox">d3ddev-&gt;SetStreamSource(0,&nbsp;v_buffer,&nbsp;0,&nbsp;sizeof(CUSTOMVERTEX));<br><br>d3ddev-&gt;DrawPrimitive(<b>D3DPT_TRIANGLESTRIP</b>,&nbsp;0,&nbsp;<b>2</b>);</div><p>Of
 course, there is also code to set up the pipeline, but that isn't 
relevant here.  What is relevant is what is different about the 
DrawPrimitive() function.  Notice that the first parameter now says 
D3DPT_TRIANGLESTRIP rather than D3DPT_TRIANGLELIST.  Also notice that 
the third parameter was changed to a 2.</p><p>In case you are foggy on 
what each of these parameters do, the first parameter says what kind of 
primitive is being drawn, the second parameter says what vertex in the 
buffer should be started with (0 is the first vertex), and the third 
parameter says how many primitives should be drawn.  In a triangle 
strip, the primitives are triangles, so a 2 means show up to 2 
triangles, and stop.  Well, that's the end of the vertex buffer anyway, 
but if we had put a 1 here, it would have stopped at one triangle.  This
 is illustrated here:</p><center><img alt="Making Triangles" src="DirectXTutorial.com_tiedostot/3.png" width="403" height="261"><br><br>Making Triangles</center><p>And that's all there is to building a quad!  Now let's combine our quads to make a cube, our first 3D model!  </p></div><div class="entryheader" style="position:relative;">Combining Quad to Make a Cube</div><div class="maintext" style="position: relative;"><p>It
 doesn't really make sense to create four vertices for every quad.   If 
we made a cube, it would end up using twenty-four vertices, while it 
would really only have eight vertex positions.  It would truly be easier
 if we could create eight vertices, then combine them to make six quads.</p><p>Well we can do this, and it does make creating simple models in code much easier.  The solution is the index buffer.</p><p>In DirectX, an <i>index</i> is an <i>int</i>
 storing the number of a vertex.  They are given in order, so the first 
vertex in a buffer is vertex number 0, the second is vertex number 1, 
the third is 2, and so on.</p><p>And <i>index buffer</i> is a buffer in 
memory that stores the order in which vertices should be rendered.  
Instead of storing a long list of coordinates, it instead stores a long 
list containing indexes (or <i>indices</i>).</p><p>Let's learn by example.</p><p>Here we have eight corners of a cube.  Each corner has a coordinate in space, but is labeled with an index number.</p><center><img alt="A Cube Made of Eight Indices" src="DirectXTutorial.com_tiedostot/4.gif" width="148" height="157"><br><br>A Cube Made of Eight Indices</center><p>We
 make this by building a vertex buffer with eight different vertices, 
each representing one corner of the cube, including its coordinates and 
color.</p><div class="codebox">CUSTOMVERTEX&nbsp;vertices[]&nbsp;=<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;-3.0f,&nbsp;3.0f,&nbsp;-3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;0,&nbsp;255),&nbsp;},&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;vertex&nbsp;0<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;3.0f,&nbsp;3.0f,&nbsp;-3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;0),&nbsp;},&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;vertex&nbsp;1<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;-3.0f,&nbsp;-3.0f,&nbsp;-3.0f,&nbsp;D3DCOLOR_XRGB(255,&nbsp;0,&nbsp;0),&nbsp;},&nbsp;&nbsp;&nbsp;//&nbsp;2<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;3.0f,&nbsp;-3.0f,&nbsp;-3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;255),&nbsp;},&nbsp;&nbsp;//&nbsp;3<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;-3.0f,&nbsp;3.0f,&nbsp;3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;0,&nbsp;255),&nbsp;},&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;...<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;3.0f,&nbsp;3.0f,&nbsp;3.0f,&nbsp;D3DCOLOR_XRGB(255,&nbsp;0,&nbsp;0),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;-3.0f,&nbsp;-3.0f,&nbsp;3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;0),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;3.0f,&nbsp;-3.0f,&nbsp;3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;255),&nbsp;},<br>};</div><p>However,
 this doesn't create any triangles or quads, just corners.  To build a 
triangle, we simply refer to three indices in a row.  If we used "0, 1, 
2" and "2, 1, 3", we would get these two triangles.  Notice that we 
could do the same to each side of the cube, making one quad for each.</p><center><img alt="Two Triangles on the Cube" src="DirectXTutorial.com_tiedostot/5.gif" width="148" height="157"><br><br>Two Triangles on the Cube</center><p>Before
 we say which indices we want to use, we need to make an index buffer, 
so let's build one.  We do this using a function called 
CreateIndexBuffer().</p><div class="codebox">HRESULT&nbsp;CreateIndexBuffer(<br>&nbsp;&nbsp;&nbsp;&nbsp;UINT&nbsp;Length,<br>&nbsp;&nbsp;&nbsp;&nbsp;DWORD&nbsp;Usage,<br>&nbsp;&nbsp;&nbsp;&nbsp;D3DFORMAT&nbsp;Format,<br>&nbsp;&nbsp;&nbsp;&nbsp;D3DPOOL&nbsp;Pool,<br>&nbsp;&nbsp;&nbsp;&nbsp;LPDIRECT3DINDEXBUFFER9&nbsp;ppIndexBuffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;HANDLE*&nbsp;pSharedHandle);</div><p>This
 is almost exactly the same as CreateVertexBuffer().  Only one parameter
 is different, but let's go ahead and look at them all briefly.</p><p class="subheader">UINT Length,</p><p style="padding-left:15px;">This
 is the size of the buffer.  Each index is stored in an int or a short. 
 For compatibility reasons, we'll use short, so this will sizeof(short) 
multiplied by the number of indices you want to use.</p><p class="subheader">DWORD Usage,</p><p style="padding-left:15px;">Just as before, we won't get into this parameter, but set it to 0.</p><p class="subheader">D3DFORMAT Format,</p><p style="padding-left:15px;">This
 parameter is new.  Here we can put flags to tell DirectX how much space
 in memory we will give to each index.  It can be D3DFMT_INDEX16 or 
D3DFMT_INDEX32.  With 16, the indices will go to the video card twice as
 fast.  However, you can only have up to 65536 indices.  Occasionally 
you will need more than this.  For our example, we will use 
D3DFMT_INDEX16, because not all video cards support 32-bits per index.</p><p class="subheader">D3DPOOL Pool,</p><p style="padding-left:15px;">This
 is the same as with the vertex buffer.  It tells DirectX where to store
 this buffer.  As before, we'll use D3DPOOL_MANAGED, meaning it will be 
located in video memory.</p><p class="subheader">LPDIRECT3DINDEXBUFFER9 ppIndexBuffer,</p><p style="padding-left:15px;">This
 is the pointer to the index buffer we'll create.  We put a blank 
pointer in, and CreateIndexBuffer() will fill it in for us so we can 
refer to it later.</p><p class="subheader">HANDLE* pSharedHandle</p><p style="padding-left:15px;">As with the vertex buffer, we'll set this to NULL.</p><p>For the most part, this function appears the same.  There are only a few, small differences.</p><div class="codebox">LPDIRECT3DINDEXBUFFER9&nbsp;i_buffer;<br><br>d3ddev-&gt;CreateIndexBuffer(36*sizeof(short),&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;3&nbsp;per&nbsp;triangle,&nbsp;12&nbsp;triangles<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DFMT_INDEX16,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DPOOL_MANAGED,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;i_buffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL);</div><p>Just
 as with the vertex buffer, we need to build an array of indices then 
copy the indices into the index buffer.  It's done exactly the same way:</p><div class="codebox">//&nbsp;create&nbsp;the&nbsp;indices&nbsp;using&nbsp;an&nbsp;int&nbsp;array<br>short&nbsp;indices[]&nbsp;=<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;0,&nbsp;1,&nbsp;2,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;side&nbsp;1<br>&nbsp;&nbsp;&nbsp;&nbsp;2,&nbsp;1,&nbsp;3,<br>&nbsp;&nbsp;&nbsp;&nbsp;4,&nbsp;0,&nbsp;6,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;side&nbsp;2<br>&nbsp;&nbsp;&nbsp;&nbsp;6,&nbsp;0,&nbsp;2,<br>&nbsp;&nbsp;&nbsp;&nbsp;7,&nbsp;5,&nbsp;6,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;side&nbsp;3<br>&nbsp;&nbsp;&nbsp;&nbsp;6,&nbsp;5,&nbsp;4,<br>&nbsp;&nbsp;&nbsp;&nbsp;3,&nbsp;1,&nbsp;7,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;side&nbsp;4<br>&nbsp;&nbsp;&nbsp;&nbsp;7,&nbsp;1,&nbsp;5,<br>&nbsp;&nbsp;&nbsp;&nbsp;4,&nbsp;5,&nbsp;0,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;side&nbsp;5<br>&nbsp;&nbsp;&nbsp;&nbsp;0,&nbsp;5,&nbsp;1,<br>&nbsp;&nbsp;&nbsp;&nbsp;3,&nbsp;7,&nbsp;2,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;side&nbsp;6<br>&nbsp;&nbsp;&nbsp;&nbsp;2,&nbsp;7,&nbsp;6,<br>};<br><br>//&nbsp;create&nbsp;an&nbsp;index&nbsp;buffer&nbsp;interface&nbsp;called&nbsp;i_buffer<br>d3ddev-&gt;CreateIndexBuffer(36*sizeof(short),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DFMT_INDEX16,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DPOOL_MANAGED,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;i_buffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL);<br><br>//&nbsp;lock&nbsp;i_buffer&nbsp;and&nbsp;load&nbsp;the&nbsp;indices&nbsp;into&nbsp;it<br>i_buffer-&gt;Lock(0,&nbsp;0,&nbsp;(void**)&amp;pVoid,&nbsp;0);<br>memcpy(pVoid,&nbsp;indices,&nbsp;sizeof(indices));<br>i_buffer-&gt;Unlock();</div><p>And if you put the whole thing together:</p><div class="codebox">//&nbsp;this&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;puts&nbsp;the&nbsp;3D&nbsp;models&nbsp;into&nbsp;video&nbsp;RAM<br>void&nbsp;init_graphics(void)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;create&nbsp;the&nbsp;vertices&nbsp;using&nbsp;the&nbsp;CUSTOMVERTEX&nbsp;struct<br>&nbsp;&nbsp;&nbsp;&nbsp;CUSTOMVERTEX&nbsp;vertices[]&nbsp;=<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;-3.0f,&nbsp;3.0f,&nbsp;-3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;0,&nbsp;255),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;3.0f,&nbsp;3.0f,&nbsp;-3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;0),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;-3.0f,&nbsp;-3.0f,&nbsp;-3.0f,&nbsp;D3DCOLOR_XRGB(255,&nbsp;0,&nbsp;0),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;3.0f,&nbsp;-3.0f,&nbsp;-3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;255),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;-3.0f,&nbsp;3.0f,&nbsp;3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;0,&nbsp;255),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;3.0f,&nbsp;3.0f,&nbsp;3.0f,&nbsp;D3DCOLOR_XRGB(255,&nbsp;0,&nbsp;0),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;-3.0f,&nbsp;-3.0f,&nbsp;3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;0),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;3.0f,&nbsp;-3.0f,&nbsp;3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;255),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;create&nbsp;a&nbsp;vertex&nbsp;buffer&nbsp;interface&nbsp;called&nbsp;v_buffer<br>&nbsp;&nbsp;&nbsp;&nbsp;d3ddev-&gt;CreateVertexBuffer(8*sizeof(CUSTOMVERTEX),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CUSTOMFVF,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DPOOL_MANAGED,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;v_buffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;VOID*&nbsp;pVoid;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;a&nbsp;void&nbsp;pointer<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;lock&nbsp;v_buffer&nbsp;and&nbsp;load&nbsp;the&nbsp;vertices&nbsp;into&nbsp;it<br>&nbsp;&nbsp;&nbsp;&nbsp;v_buffer-&gt;Lock(0,&nbsp;0,&nbsp;(void**)&amp;pVoid,&nbsp;0);<br>&nbsp;&nbsp;&nbsp;&nbsp;memcpy(pVoid,&nbsp;vertices,&nbsp;sizeof(vertices));<br>&nbsp;&nbsp;&nbsp;&nbsp;v_buffer-&gt;Unlock();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;create&nbsp;the&nbsp;indices&nbsp;using&nbsp;an&nbsp;int&nbsp;array<br>&nbsp;&nbsp;&nbsp;&nbsp;short&nbsp;indices[]&nbsp;=<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0,&nbsp;1,&nbsp;2,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;side&nbsp;1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2,&nbsp;1,&nbsp;3,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4,&nbsp;0,&nbsp;6,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;side&nbsp;2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6,&nbsp;0,&nbsp;2,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7,&nbsp;5,&nbsp;6,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;side&nbsp;3<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6,&nbsp;5,&nbsp;4,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3,&nbsp;1,&nbsp;7,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;side&nbsp;4<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7,&nbsp;1,&nbsp;5,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4,&nbsp;5,&nbsp;0,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;side&nbsp;5<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0,&nbsp;5,&nbsp;1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3,&nbsp;7,&nbsp;2,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;side&nbsp;6<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2,&nbsp;7,&nbsp;6,<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;create&nbsp;an&nbsp;index&nbsp;buffer&nbsp;interface&nbsp;called&nbsp;i_buffer<br>&nbsp;&nbsp;&nbsp;&nbsp;d3ddev-&gt;CreateIndexBuffer(36*sizeof(short),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DFMT_INDEX16,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DPOOL_MANAGED,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;i_buffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;lock&nbsp;i_buffer&nbsp;and&nbsp;load&nbsp;the&nbsp;indices&nbsp;into&nbsp;it<br>&nbsp;&nbsp;&nbsp;&nbsp;i_buffer-&gt;Lock(0,&nbsp;0,&nbsp;(void**)&amp;pVoid,&nbsp;0);<br>&nbsp;&nbsp;&nbsp;&nbsp;memcpy(pVoid,&nbsp;indices,&nbsp;sizeof(indices));<br>&nbsp;&nbsp;&nbsp;&nbsp;i_buffer-&gt;Unlock();<br>}</div><p>So
 how do we draw all this?  It's pretty simple, but it needs some new 
functions.  Here's the drawing code.  This comes after all the 
transforms are set and before EndScene() is called.</p><div class="codebox">//&nbsp;select&nbsp;the&nbsp;vertex&nbsp;and&nbsp;index&nbsp;buffers&nbsp;to&nbsp;use<br>d3ddev-&gt;SetStreamSource(0,&nbsp;v_buffer,&nbsp;0,&nbsp;sizeof(CUSTOMVERTEX));<br>d3ddev-&gt;SetIndices(i_buffer);<br><br>//&nbsp;draw&nbsp;the&nbsp;cube<br>d3ddev-&gt;DrawIndexedPrimitive(D3DPT_TRIANGLELIST,&nbsp;0,&nbsp;0,&nbsp;8,&nbsp;0,&nbsp;12);</div><p class="subheader">SetStreamSource()</p><p style="padding-left:15px;">This is exactly the same as before.  All it does is tell Direct3D which vertex buffer we are drawing from.</p><p class="subheader">SetIndices()</p><p style="padding-left:15px;">This function is similar, but much simpler.  It's purpose is to set the index buffer we will use.</p><p style="padding-left:15px;">It
 has one parameter, the address of the index buffer.  We only have one 
index buffer, so the parameter will be i_buffer.  Remember that i_buffer
 is already a pointer, so we don't put &amp;i_buffer.</p><p class="subheader">DrawIndexedPrimitive()</p><p style="padding-left:15px;">This
 one is quite different than DrawPrimitive().  It essentially does the 
same thing, but it only draws shapes using an index buffer.  Here's the 
prototype:</p><div class="codebox" style="left:15px;">HRESULT&nbsp;DrawIndexedPrimitive(D3DPRIMITIVETYPE&nbsp;Type,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;INT&nbsp;BaseVertexIndex,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UINT&nbsp;MinIndex,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UINT&nbsp;NumVertices,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UINT&nbsp;StartIndex,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UINT&nbsp;PrimitiveCount);</div><p style="padding-left:15px;">The
 first parameter is familiar to us.  It's the style of drawing, such as 
triangle strips, or line lists.  We're going to use D3DPT_TRIANGLELIST, 
because each set of three indices represents a whole triangle.</p><p style="padding-left:15px;">The
 second parameter tells how many vertices into the buffer we want to 
start.  We're going to put 0 here, but just so you get what this is, 
let's take a simple example.  If we put 4 here, then index 0 would point
 to vertex 4, index 1 would point to vertex 5, and so on.</p><p style="padding-left:15px;">The
 next number is the lowest index we'll use.  We want 0, so we'll put 0. 
 It's really just a hint to Direct3D on how to best optimize memory for 
us behind the scenes.</p><p style="padding-left:15px;">The fourth parameter is the number of vertices we'll use.  We use 8 in the cube.  Again, this helps Direct3D with optimization.</p><p style="padding-left:15px;">The
 fifth parameter tells DirectX where to start on the index buffer.  This
 is used for more complicated situations where you have more than one 
shape stored in a single index buffer.  For example, if we had a cube 
take up spaces 0 to 35, and a completely different shape take from 36 to
 51, we could put 36 in this parameter, and DirectX would know where to 
start reading on the buffer.  We aren't doing this, so we'll set it to 
0, the beginning of the index buffer.</p><p style="padding-left:15px;">The last parameter is the number of triangles we will draw.  This cube draws twelve, two for each side.</p><p>If
 you take the new code and put it into your program, you'll get a nice 
rotating cube (provided you still have the right transforms there).  
Here's a picture of a cube I got with one transform:</p><center><img alt="A Rotating Cube" src="DirectXTutorial.com_tiedostot/6.png" width="302" height="292"><br><br>A Rotating Cube</center><p>Try building the cube in your program and spinning it in various ways.  </p></div><div class="entryheader" style="position:relative;">More Shapes</div><div class="maintext" style="position: relative;"><p>Well,
 I don't know about you, but I'm really excited!  We've built our first 
3D object for real!  Let's look at a couple more simple models we can 
make using quads and triangles.</p><hr><p class="subheader">A Square Pyramid</p><p style="padding-left:15px;">Let's look at how to build this shape.</p><center><img alt="A Square Pyramid" src="DirectXTutorial.com_tiedostot/7.png" width="303" height="304"><br><br>A Square Pyramid</center><p style="padding-left:15px;">Here is the code for the vertex buffer:</p><div class="codebox" style="left:15px;">//&nbsp;create&nbsp;the&nbsp;vertices&nbsp;using&nbsp;the&nbsp;CUSTOMVERTEX<br>struct&nbsp;CUSTOMVERTEX&nbsp;vertices[]&nbsp;=<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;base<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;-3.0f,&nbsp;0.0f,&nbsp;3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;0),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;3.0f,&nbsp;0.0f,&nbsp;3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;0,&nbsp;255),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;-3.0f,&nbsp;0.0f,&nbsp;-3.0f,&nbsp;D3DCOLOR_XRGB(255,&nbsp;0,&nbsp;0),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;3.0f,&nbsp;0.0f,&nbsp;-3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;255),&nbsp;},<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;top<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;0.0f,&nbsp;7.0f,&nbsp;0.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;0),&nbsp;},<br>};<br><br>//&nbsp;create&nbsp;a&nbsp;vertex&nbsp;buffer&nbsp;interface&nbsp;called&nbsp;v_buffer<br>d3ddev-&gt;CreateVertexBuffer(5*sizeof(CUSTOMVERTEX),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CUSTOMFVF,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DPOOL_MANAGED,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;v_buffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL);</div><p style="padding-left:15px;">And for the index buffer:</p><div class="codebox" style="left:15px;">//&nbsp;create&nbsp;the&nbsp;indices&nbsp;using&nbsp;an&nbsp;int&nbsp;array<br>short&nbsp;indices[]&nbsp;=<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;0,&nbsp;2,&nbsp;1,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;base<br>&nbsp;&nbsp;&nbsp;&nbsp;1,&nbsp;2,&nbsp;3,<br>&nbsp;&nbsp;&nbsp;&nbsp;0,&nbsp;1,&nbsp;4,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;sides<br>&nbsp;&nbsp;&nbsp;&nbsp;1,&nbsp;3,&nbsp;4,<br>&nbsp;&nbsp;&nbsp;&nbsp;3,&nbsp;2,&nbsp;4,<br>&nbsp;&nbsp;&nbsp;&nbsp;2,&nbsp;0,&nbsp;4,<br>};<br><br>//&nbsp;create&nbsp;a&nbsp;index&nbsp;buffer&nbsp;interface&nbsp;called&nbsp;i_buffer<br>d3ddev-&gt;CreateIndexBuffer(18*sizeof(short),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DFMT_INDEX16,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DPOOL_MANAGED,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;i_buffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL);</div><p style="padding-left:15px;">And then to draw the shape:</p><div class="codebox" style="left:15px;">//&nbsp;select&nbsp;the&nbsp;vertex&nbsp;buffer&nbsp;to&nbsp;display<br>d3ddev-&gt;SetStreamSource(0,&nbsp;v_buffer,&nbsp;0,&nbsp;sizeof(CUSTOMVERTEX));<br>d3ddev-&gt;SetIndices(i_buffer);<br><br>//&nbsp;draw&nbsp;the&nbsp;pyramid<br>d3ddev-&gt;DrawIndexedPrimitive(D3DPT_TRIANGLELIST,&nbsp;0,&nbsp;0,&nbsp;5,&nbsp;0,&nbsp;6);</div><p style="padding-left:15px;">Take a moment to study how this code differs from the cube's.</p><hr><p class="subheader">The Hypercraft</p><p style="padding-left:15px;">Now
 let's do something a little bit more exciting.  We'll take a break from
 boring geometry and get into some real stuff.  Let's build a 
"Hypercraft", which is a ship from the first 3D game I ever wrote (and 
I've used ever since).  Here's what this ship looks like:</p><center><img alt="The Hypercraft" src="DirectXTutorial.com_tiedostot/8.png" width="316" height="211"><br><br>The Hypercraft</center><p style="padding-left:15px;">Here's the code for the vertex buffer:</p><div class="codebox" style="left:15px;">//&nbsp;create&nbsp;the&nbsp;vertices&nbsp;using&nbsp;the&nbsp;CUSTOMVERTEX<br>struct&nbsp;CUSTOMVERTEX&nbsp;vertices[]&nbsp;=<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;fuselage<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;3.0f,&nbsp;0.0f,&nbsp;0.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;0),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;0.0f,&nbsp;3.0f,&nbsp;-3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;0,&nbsp;255),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;0.0f,&nbsp;0.0f,&nbsp;10.0f,&nbsp;D3DCOLOR_XRGB(255,&nbsp;0,&nbsp;0),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;-3.0f,&nbsp;0.0f,&nbsp;0.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;255),&nbsp;},<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;left&nbsp;gun<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;3.2f,&nbsp;-1.0f,&nbsp;-3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;0,&nbsp;255),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;3.2f,&nbsp;-1.0f,&nbsp;11.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;0),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;2.0f,&nbsp;1.0f,&nbsp;2.0f,&nbsp;D3DCOLOR_XRGB(255,&nbsp;0,&nbsp;0),&nbsp;},<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;right&nbsp;gun<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;-3.2f,&nbsp;-1.0f,&nbsp;-3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;0,&nbsp;255),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;-3.2f,&nbsp;-1.0f,&nbsp;11.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;0),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;-2.0f,&nbsp;1.0f,&nbsp;2.0f,&nbsp;D3DCOLOR_XRGB(255,&nbsp;0,&nbsp;0),&nbsp;},<br>};<br><br>//&nbsp;create&nbsp;a&nbsp;vertex&nbsp;buffer&nbsp;interface&nbsp;called&nbsp;v_buffer<br>d3ddev-&gt;CreateVertexBuffer(10*sizeof(CUSTOMVERTEX),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CUSTOMFVF,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DPOOL_MANAGED,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;v_buffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL);</div><p style="padding-left:15px;">And for the index buffer:</p><div class="codebox" style="left:15px;">//&nbsp;create&nbsp;the&nbsp;indices&nbsp;using&nbsp;an&nbsp;int&nbsp;array<br>short&nbsp;indices[]&nbsp;=<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;0,&nbsp;1,&nbsp;2,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;fuselage<br>&nbsp;&nbsp;&nbsp;&nbsp;2,&nbsp;1,&nbsp;3,<br>&nbsp;&nbsp;&nbsp;&nbsp;3,&nbsp;1,&nbsp;0,<br>&nbsp;&nbsp;&nbsp;&nbsp;0,&nbsp;2,&nbsp;3,<br>&nbsp;&nbsp;&nbsp;&nbsp;4,&nbsp;5,&nbsp;6,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;wings<br>&nbsp;&nbsp;&nbsp;&nbsp;7,&nbsp;8,&nbsp;9,<br>};<br><br>//&nbsp;create&nbsp;a&nbsp;index&nbsp;buffer&nbsp;interface&nbsp;called&nbsp;i_buffer<br>d3ddev-&gt;CreateIndexBuffer(18*sizeof(short),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DFMT_INDEX16,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DPOOL_MANAGED,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;i_buffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL);</div><p style="padding-left:15px;">And then to draw the shape:</p><div class="codebox" style="left:15px;">//&nbsp;select&nbsp;the&nbsp;vertex&nbsp;buffer&nbsp;to&nbsp;display<br>d3ddev-&gt;SetStreamSource(0,&nbsp;v_buffer,&nbsp;0,&nbsp;sizeof(CUSTOMVERTEX));<br>d3ddev-&gt;SetIndices(i_buffer);<br><br>//&nbsp;draw&nbsp;the&nbsp;Hypercraft<br>d3ddev-&gt;DrawIndexedPrimitive(D3DPT_TRIANGLELIST,&nbsp;0,&nbsp;0,&nbsp;10,&nbsp;0,&nbsp;6);</div><p style="padding-left:15px;">And
 there you have it!  We've got a functioning 3D model of a spaceship.  
Admittedly it could improve a little on the aerodynamics, but we'll get 
there for sure.  For now, let's put in a rotation matrix and see what 
she looks like.  </p></div><div class="entryheader" style="position:relative;">The Finished Program</div><div class="maintext" style="position: relative;"><p>I
 chose to use the Hypercraft model for this demo.  It rotates around 
much like a car advertisement, only it looks somewhat more polygonal 
than an actual car.</p>[<a href="" onclick="DisplaySample(0); return false;" class="mainlink">Main.cpp</a>]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><br><div class="codebox" id="codefile0" style="display:none">//&nbsp;include&nbsp;the&nbsp;basic&nbsp;windows&nbsp;header&nbsp;files&nbsp;and&nbsp;the&nbsp;Direct3D&nbsp;header&nbsp;file<br>#include&nbsp;&lt;windows.h&gt;<br>#include&nbsp;&lt;windowsx.h&gt;<br>#include&nbsp;&lt;d3d9.h&gt;<br>#include&nbsp;&lt;d3dx9.h&gt;<br><br>//&nbsp;define&nbsp;the&nbsp;screen&nbsp;resolution<br>#define&nbsp;SCREEN_WIDTH&nbsp;800<br>#define&nbsp;SCREEN_HEIGHT&nbsp;600<br><br>//&nbsp;include&nbsp;the&nbsp;Direct3D&nbsp;Library&nbsp;files<br>#pragma&nbsp;comment&nbsp;(lib,&nbsp;"d3d9.lib")<br>#pragma&nbsp;comment&nbsp;(lib,&nbsp;"d3dx9.lib")<br><br>//&nbsp;global&nbsp;declarations<br>LPDIRECT3D9&nbsp;d3d;<br>LPDIRECT3DDEVICE9&nbsp;d3ddev;<br>LPDIRECT3DVERTEXBUFFER9&nbsp;v_buffer&nbsp;=&nbsp;NULL;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;pointer&nbsp;to&nbsp;the&nbsp;vertex&nbsp;buffer<br><b>LPDIRECT3DINDEXBUFFER9&nbsp;i_buffer&nbsp;=&nbsp;NULL;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;pointer&nbsp;to&nbsp;the&nbsp;index&nbsp;buffer</b><br><br>//&nbsp;function&nbsp;prototypes<br>void&nbsp;initD3D(HWND&nbsp;hWnd);<br>void&nbsp;render_frame(void);<br>void&nbsp;cleanD3D(void);<br>void&nbsp;init_graphics(void);<br><br>struct&nbsp;CUSTOMVERTEX&nbsp;{FLOAT&nbsp;X,&nbsp;Y,&nbsp;Z;&nbsp;DWORD&nbsp;COLOR;};<br>#define&nbsp;CUSTOMFVF&nbsp;(D3DFVF_XYZ&nbsp;|&nbsp;D3DFVF_DIFFUSE)<br><br>//&nbsp;the&nbsp;WindowProc&nbsp;function&nbsp;prototype<br>LRESULT&nbsp;CALLBACK&nbsp;WindowProc(HWND&nbsp;hWnd,&nbsp;UINT&nbsp;message,&nbsp;WPARAM&nbsp;wParam,&nbsp;LPARAM&nbsp;lParam);<br><br><br>//&nbsp;the&nbsp;entry&nbsp;point&nbsp;for&nbsp;any&nbsp;Windows&nbsp;program<br>int&nbsp;WINAPI&nbsp;WinMain(HINSTANCE&nbsp;hInstance,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HINSTANCE&nbsp;hPrevInstance,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LPSTR&nbsp;lpCmdLine,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;nCmdShow)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;HWND&nbsp;hWnd;<br>&nbsp;&nbsp;&nbsp;&nbsp;WNDCLASSEX&nbsp;wc;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;ZeroMemory(&amp;wc,&nbsp;sizeof(WNDCLASSEX));<br><br>&nbsp;&nbsp;&nbsp;&nbsp;wc.cbSize&nbsp;=&nbsp;sizeof(WNDCLASSEX);<br>&nbsp;&nbsp;&nbsp;&nbsp;wc.style&nbsp;=&nbsp;CS_HREDRAW&nbsp;|&nbsp;CS_VREDRAW;<br>&nbsp;&nbsp;&nbsp;&nbsp;wc.lpfnWndProc&nbsp;=&nbsp;WindowProc;<br>&nbsp;&nbsp;&nbsp;&nbsp;wc.hInstance&nbsp;=&nbsp;hInstance;<br>&nbsp;&nbsp;&nbsp;&nbsp;wc.hCursor&nbsp;=&nbsp;LoadCursor(NULL,&nbsp;IDC_ARROW);<br>&nbsp;&nbsp;&nbsp;&nbsp;wc.lpszClassName&nbsp;=&nbsp;L"WindowClass";<br><br>&nbsp;&nbsp;&nbsp;&nbsp;RegisterClassEx(&amp;wc);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;hWnd&nbsp;=&nbsp;CreateWindowEx(NULL,&nbsp;L"WindowClass",&nbsp;L"Our&nbsp;Direct3D&nbsp;Program",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WS_OVERLAPPEDWINDOW,&nbsp;0,&nbsp;0,&nbsp;SCREEN_WIDTH,&nbsp;SCREEN_HEIGHT,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL,&nbsp;NULL,&nbsp;hInstance,&nbsp;NULL);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;ShowWindow(hWnd,&nbsp;nCmdShow);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;initD3D(hWnd);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;MSG&nbsp;msg;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;while(TRUE)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(PeekMessage(&amp;msg,&nbsp;NULL,&nbsp;0,&nbsp;0,&nbsp;PM_REMOVE))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TranslateMessage(&amp;msg);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DispatchMessage(&amp;msg);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(msg.message&nbsp;==&nbsp;WM_QUIT)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;render_frame();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;cleanD3D();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;msg.wParam;<br>}<br><br><br>//&nbsp;this&nbsp;is&nbsp;the&nbsp;main&nbsp;message&nbsp;handler&nbsp;for&nbsp;the&nbsp;program<br>LRESULT&nbsp;CALLBACK&nbsp;WindowProc(HWND&nbsp;hWnd,&nbsp;UINT&nbsp;message,&nbsp;WPARAM&nbsp;wParam,&nbsp;LPARAM&nbsp;lParam)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;switch(message)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;WM_DESTROY:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostQuitMessage(0);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;break;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;DefWindowProc&nbsp;(hWnd,&nbsp;message,&nbsp;wParam,&nbsp;lParam);<br>}<br><br><br>//&nbsp;this&nbsp;function&nbsp;initializes&nbsp;and&nbsp;prepares&nbsp;Direct3D&nbsp;for&nbsp;use<br>void&nbsp;initD3D(HWND&nbsp;hWnd)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;d3d&nbsp;=&nbsp;Direct3DCreate9(D3D_SDK_VERSION);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;D3DPRESENT_PARAMETERS&nbsp;d3dpp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;ZeroMemory(&amp;d3dpp,&nbsp;sizeof(d3dpp));<br>&nbsp;&nbsp;&nbsp;&nbsp;d3dpp.Windowed&nbsp;=&nbsp;TRUE;<br>&nbsp;&nbsp;&nbsp;&nbsp;d3dpp.SwapEffect&nbsp;=&nbsp;D3DSWAPEFFECT_DISCARD;<br>&nbsp;&nbsp;&nbsp;&nbsp;d3dpp.hDeviceWindow&nbsp;=&nbsp;hWnd;<br>&nbsp;&nbsp;&nbsp;&nbsp;d3dpp.BackBufferFormat&nbsp;=&nbsp;D3DFMT_X8R8G8B8;<br>&nbsp;&nbsp;&nbsp;&nbsp;d3dpp.BackBufferWidth&nbsp;=&nbsp;SCREEN_WIDTH;<br>&nbsp;&nbsp;&nbsp;&nbsp;d3dpp.BackBufferHeight&nbsp;=&nbsp;SCREEN_HEIGHT;<br>&nbsp;&nbsp;&nbsp;&nbsp;d3dpp.EnableAutoDepthStencil&nbsp;=&nbsp;TRUE;<br>&nbsp;&nbsp;&nbsp;&nbsp;d3dpp.AutoDepthStencilFormat&nbsp;=&nbsp;D3DFMT_D16;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;d3d-&gt;CreateDevice(D3DADAPTER_DEFAULT,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DDEVTYPE_HAL,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hWnd,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DCREATE_SOFTWARE_VERTEXPROCESSING,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;d3dpp,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;d3ddev);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;init_graphics();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;d3ddev-&gt;SetRenderState(D3DRS_LIGHTING,&nbsp;FALSE);&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;turn&nbsp;off&nbsp;the&nbsp;3D&nbsp;lighting<br>&nbsp;&nbsp;&nbsp;&nbsp;d3ddev-&gt;SetRenderState(D3DRS_CULLMODE,&nbsp;D3DCULL_NONE);&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;turn&nbsp;off&nbsp;culling<br>&nbsp;&nbsp;&nbsp;&nbsp;d3ddev-&gt;SetRenderState(D3DRS_ZENABLE,&nbsp;TRUE);&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;turn&nbsp;on&nbsp;the&nbsp;z-buffer<br>}<br><br><br>//&nbsp;this&nbsp;is&nbsp;the&nbsp;function&nbsp;used&nbsp;to&nbsp;render&nbsp;a&nbsp;single&nbsp;frame<br>void&nbsp;render_frame(void)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;d3ddev-&gt;Clear(0,&nbsp;NULL,&nbsp;D3DCLEAR_TARGET,&nbsp;D3DCOLOR_XRGB(0,&nbsp;0,&nbsp;0),&nbsp;1.0f,&nbsp;0);<br>&nbsp;&nbsp;&nbsp;&nbsp;d3ddev-&gt;Clear(0,&nbsp;NULL,&nbsp;D3DCLEAR_ZBUFFER,&nbsp;D3DCOLOR_XRGB(0,&nbsp;0,&nbsp;0),&nbsp;1.0f,&nbsp;0);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;d3ddev-&gt;BeginScene();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;d3ddev-&gt;SetFVF(CUSTOMFVF);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;set&nbsp;the&nbsp;view&nbsp;transform<br>&nbsp;&nbsp;&nbsp;&nbsp;D3DXMATRIX&nbsp;matView;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;view&nbsp;transform&nbsp;matrix<br>&nbsp;&nbsp;&nbsp;&nbsp;D3DXMatrixLookAtLH(&amp;matView,<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;D3DXVECTOR3&nbsp;(0.0f,&nbsp;8.0f,&nbsp;25.0f),&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;camera&nbsp;position<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;D3DXVECTOR3&nbsp;(0.0f,&nbsp;0.0f,&nbsp;0.0f),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;look-at&nbsp;position<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;D3DXVECTOR3&nbsp;(0.0f,&nbsp;1.0f,&nbsp;0.0f));&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;up&nbsp;direction<br>&nbsp;&nbsp;&nbsp;&nbsp;d3ddev-&gt;SetTransform(D3DTS_VIEW,&nbsp;&amp;matView);&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;set&nbsp;the&nbsp;view&nbsp;transform&nbsp;to&nbsp;matView&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;set&nbsp;the&nbsp;projection&nbsp;transform<br>&nbsp;&nbsp;&nbsp;&nbsp;D3DXMATRIX&nbsp;matProjection;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;projection&nbsp;transform&nbsp;matrix<br>&nbsp;&nbsp;&nbsp;&nbsp;D3DXMatrixPerspectiveFovLH(&amp;matProjection,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DXToRadian(45),&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;horizontal&nbsp;field&nbsp;of&nbsp;view<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(FLOAT)SCREEN_WIDTH&nbsp;/&nbsp;(FLOAT)SCREEN_HEIGHT,&nbsp;//&nbsp;aspect&nbsp;ratio<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.0f,&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;near&nbsp;view-plane<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;100.0f);&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;far&nbsp;view-plane<br>&nbsp;&nbsp;&nbsp;&nbsp;d3ddev-&gt;SetTransform(D3DTS_PROJECTION,&nbsp;&amp;matProjection);&nbsp;//&nbsp;set&nbsp;the&nbsp;projection<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;set&nbsp;the&nbsp;world&nbsp;transform<br>&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;float&nbsp;index&nbsp;=&nbsp;0.0f;&nbsp;index+=0.03f;&nbsp;//&nbsp;an&nbsp;ever-increasing&nbsp;float&nbsp;value<br>&nbsp;&nbsp;&nbsp;&nbsp;D3DXMATRIX&nbsp;matRotateY;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;a&nbsp;matrix&nbsp;to&nbsp;store&nbsp;the&nbsp;rotation&nbsp;for&nbsp;each&nbsp;triangle<br>&nbsp;&nbsp;&nbsp;&nbsp;D3DXMatrixRotationY(&amp;matRotateY,&nbsp;index);&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;rotation&nbsp;matrix<br>&nbsp;&nbsp;&nbsp;&nbsp;d3ddev-&gt;SetTransform(D3DTS_WORLD,&nbsp;&amp;(matRotateY));&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;set&nbsp;the&nbsp;world&nbsp;transform<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;select&nbsp;the&nbsp;vertex&nbsp;buffer&nbsp;to&nbsp;display<br>&nbsp;&nbsp;&nbsp;&nbsp;d3ddev-&gt;SetStreamSource(0,&nbsp;v_buffer,&nbsp;0,&nbsp;sizeof(CUSTOMVERTEX));<br>&nbsp;&nbsp;&nbsp;&nbsp;<b>d3ddev-&gt;SetIndices(i_buffer);</b><br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;draw&nbsp;the&nbsp;Hypercraft<br>&nbsp;&nbsp;&nbsp;&nbsp;<b>d3ddev-&gt;DrawIndexedPrimitive(D3DPT_TRIANGLELIST,&nbsp;0,&nbsp;0,&nbsp;10,&nbsp;0,&nbsp;6);</b><br><br>&nbsp;&nbsp;&nbsp;&nbsp;d3ddev-&gt;EndScene();&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;d3ddev-&gt;Present(NULL,&nbsp;NULL,&nbsp;NULL,&nbsp;NULL);<br>}<br><br><br>//&nbsp;this&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;cleans&nbsp;up&nbsp;Direct3D&nbsp;and&nbsp;COM<br>void&nbsp;cleanD3D(void)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;v_buffer-&gt;Release();<br>&nbsp;&nbsp;&nbsp;&nbsp;<b>i_buffer-&gt;Release();</b><br>&nbsp;&nbsp;&nbsp;&nbsp;d3ddev-&gt;Release();<br>&nbsp;&nbsp;&nbsp;&nbsp;d3d-&gt;Release();<br>}<br><br><br>//&nbsp;this&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;puts&nbsp;the&nbsp;3D&nbsp;models&nbsp;into&nbsp;video&nbsp;RAM<br>void&nbsp;init_graphics(void)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;create&nbsp;the&nbsp;vertices&nbsp;using&nbsp;the&nbsp;CUSTOMVERTEX<br>&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;CUSTOMVERTEX&nbsp;vertices[]&nbsp;=<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>//&nbsp;fuselage<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;3.0f,&nbsp;0.0f,&nbsp;0.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;0),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;0.0f,&nbsp;3.0f,&nbsp;-3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;0,&nbsp;255),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;0.0f,&nbsp;0.0f,&nbsp;10.0f,&nbsp;D3DCOLOR_XRGB(255,&nbsp;0,&nbsp;0),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;-3.0f,&nbsp;0.0f,&nbsp;0.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;255),&nbsp;},<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;left&nbsp;gun<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;3.2f,&nbsp;-1.0f,&nbsp;-3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;0,&nbsp;255),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;3.2f,&nbsp;-1.0f,&nbsp;11.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;0),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;2.0f,&nbsp;1.0f,&nbsp;2.0f,&nbsp;D3DCOLOR_XRGB(255,&nbsp;0,&nbsp;0),&nbsp;},<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;right&nbsp;gun<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;-3.2f,&nbsp;-1.0f,&nbsp;-3.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;0,&nbsp;255),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;-3.2f,&nbsp;-1.0f,&nbsp;11.0f,&nbsp;D3DCOLOR_XRGB(0,&nbsp;255,&nbsp;0),&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;-2.0f,&nbsp;1.0f,&nbsp;2.0f,&nbsp;D3DCOLOR_XRGB(255,&nbsp;0,&nbsp;0),&nbsp;},</b><br>&nbsp;&nbsp;&nbsp;&nbsp;};<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;create&nbsp;a&nbsp;vertex&nbsp;buffer&nbsp;interface&nbsp;called&nbsp;v_buffer<br>&nbsp;&nbsp;&nbsp;&nbsp;d3ddev-&gt;CreateVertexBuffer(<b>10</b>*sizeof(CUSTOMVERTEX),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CUSTOMFVF,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DPOOL_MANAGED,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;v_buffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;VOID*&nbsp;pVoid;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;a&nbsp;void&nbsp;pointer<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;lock&nbsp;v_buffer&nbsp;and&nbsp;load&nbsp;the&nbsp;vertices&nbsp;into&nbsp;it<br>&nbsp;&nbsp;&nbsp;&nbsp;v_buffer-&gt;Lock(0,&nbsp;0,&nbsp;(void**)&amp;pVoid,&nbsp;0);<br>&nbsp;&nbsp;&nbsp;&nbsp;memcpy(pVoid,&nbsp;vertices,&nbsp;sizeof(vertices));<br>&nbsp;&nbsp;&nbsp;&nbsp;v_buffer-&gt;Unlock();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<b>//&nbsp;create&nbsp;the&nbsp;indices&nbsp;using&nbsp;an&nbsp;int&nbsp;array<br>&nbsp;&nbsp;&nbsp;&nbsp;short&nbsp;indices[]&nbsp;=<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0,&nbsp;1,&nbsp;2,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;fuselage<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2,&nbsp;1,&nbsp;3,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3,&nbsp;1,&nbsp;0,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0,&nbsp;2,&nbsp;3,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4,&nbsp;5,&nbsp;6,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;wings<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7,&nbsp;8,&nbsp;9,<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;create&nbsp;a&nbsp;index&nbsp;buffer&nbsp;interface&nbsp;called&nbsp;i_buffer<br>&nbsp;&nbsp;&nbsp;&nbsp;d3ddev-&gt;CreateIndexBuffer(18*sizeof(short),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DFMT_INDEX16,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DPOOL_MANAGED,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;i_buffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;lock&nbsp;i_buffer&nbsp;and&nbsp;load&nbsp;the&nbsp;indices&nbsp;into&nbsp;it<br>&nbsp;&nbsp;&nbsp;&nbsp;i_buffer-&gt;Lock(0,&nbsp;0,&nbsp;(void**)&amp;pVoid,&nbsp;0);<br>&nbsp;&nbsp;&nbsp;&nbsp;memcpy(pVoid,&nbsp;indices,&nbsp;sizeof(indices));<br>&nbsp;&nbsp;&nbsp;&nbsp;i_buffer-&gt;Unlock();&nbsp;</b><br>}</div><p>Run the code, and see the family vehicle of the future!  Well, maybe the virtual future.  Well, maybe not...</p><center><img alt="The Hypercraft In Action  " src="DirectXTutorial.com_tiedostot/9.png" width="638" height="478"><br><br>The Hypercraft In Action  </center></div><div class="entryheader" style="position:relative;">Summary</div><div class="maintext" style="position: relative;"><p>Wow!
  Now we are getting somewhere with 3D!  Get good at everything up to 
this point, and then let's move on and make the Hypercraft look decent 
with some 3D lighting.  In the meantime, try doing these exercises:</p><p>1.  Make a square<br>2.  Make a triangular pyramid<br>3.  Draw 20 copies of your triangular pyramid on the screen at once<br>4.  Add a tail fin in the back of the Hypercraft<br>5.  Design and build your own mini-spaceship</p><p>Now let's get on to lighting!  Let's make these objects look cool!</p><center><p>Next Lesson: Rendering with Vertex Lighting</p><p><a class="mainlink" href="http://www.directxtutorial.com/Lesson.aspx?lessonid=9-4-8">GO! GO! GO!</a></p></center></div><center><div class="copyright"> © 2006-2017 DirectXTutorial.com. All Rights Reserved. <a href="" onclick="RunLegal(); return false;" class="availablelink">Expand</a></div></center></div></body></html>