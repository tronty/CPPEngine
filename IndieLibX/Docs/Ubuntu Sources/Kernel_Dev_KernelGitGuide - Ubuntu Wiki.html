<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="robots" content="index,nofollow">

<title>Kernel/Dev/KernelGitGuide - Ubuntu Wiki</title>





<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="Kernel_Dev_KernelGitGuide%20-%20Ubuntu%20Wiki_tiedostot/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="Kernel_Dev_KernelGitGuide%20-%20Ubuntu%20Wiki_tiedostot/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="Kernel_Dev_KernelGitGuide%20-%20Ubuntu%20Wiki_tiedostot/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="Kernel_Dev_KernelGitGuide%20-%20Ubuntu%20Wiki_tiedostot/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static193/light/css/msie.css">
<![endif]-->





<link rel="Start" href="https://wiki.ubuntu.com/Home">
<link rel="Alternate" title="Wiki-merkintä" href="https://wiki.ubuntu.com/Kernel/Dev/KernelGitGuide?action=raw">
<link rel="Alternate" media="print" title="Tulostettavassa muodossa" href="https://wiki.ubuntu.com/Kernel/Dev/KernelGitGuide?action=print">
<link rel="Up" href="https://wiki.ubuntu.com/Kernel/Dev">
<link rel="Search" href="https://wiki.ubuntu.com/FindPage">
<link rel="Index" href="https://wiki.ubuntu.com/TitleIndex">
<link rel="Glossary" href="https://wiki.ubuntu.com/WordIndex">
<link rel="Help" href="https://wiki.ubuntu.com/HelpOnFormatting">
</head>

<body dir="ltr" lang="fi">

<!-- BEGIN HEADER -->
<div id="wrapper" class="hfeed">
<div id="header">
    <ul id="mothership">
        <li> <a href="http://www.ubuntu.com/partners">Partners</a> </li>
        <li> <a href="http://www.ubuntu.com/support">Support</a> </li>
        <li> <a href="http://www.ubuntu.com/community">Community</a> </li>
        <li> <a href="http://www.ubuntu.com/">Ubuntu.com</a> </li>
    </ul>

    <div id="orangeHeader">
        <h1> <a href="https://wiki.ubuntu.com/" title="Ubuntu Wiki"><span>Ubuntu Wiki</span></a> </h1>
            <div id="search-box">

<form id="searchform" method="get" action="/Kernel/Dev/KernelGitGuide">
<div>
<input name="action" value="fullsearch" type="hidden">
<input name="context" value="180" type="hidden">
<label for="searchinput" style="display: none;">Etsi:</label>
<input id="searchinput" name="value" value="Etsi..." size="20" onfocus="searchFocus(this)" onblur="searchBlur(this)" onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search" class="disabled" type="text">
<input id="titlesearch" name="titlesearch" value="sivujen nimistä" alt="Search Titles" disabled="disabled" type="submit">
<input id="fullsearch" name="fullsearch" value="sivujen sisällöstä" alt="Search Full Text" disabled="disabled" type="submit">
</div>
</form>



            </div>
    </div>

</div>
    <div id="wikinav"> 
<ul class="editbar"><li><span class="disabled">Kirjoitussuojattu sivu</span></li><li><a class="nbinfo" href="https://wiki.ubuntu.com/Kernel/Dev/KernelGitGuide?action=info" rel="nofollow">Tiedot</a></li><li><a class="nbattachments" href="https://wiki.ubuntu.com/Kernel/Dev/KernelGitGuide?action=AttachFile" rel="nofollow">Liitetiedostot</a></li><li>
<form class="actionsmenu" method="GET" action="/Kernel/Dev/KernelGitGuide">
<div>
    
    <select name="action" onchange="if ((this.selectedIndex != 0) &amp;&amp;
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show" selected="selected">Lisää toimintoja:</option><option value="raw">Muotoilematon teksti</option>
<option value="print">Tulostettavassa muodossa</option>
<option value="refresh">Poista välimuistista</option>
<option value="show" disabled="disabled" class="disabled">------------------------</option>
<option value="SpellCheck">Oikolue</option>
<option value="LikePages">Samankaltaisia sivuja</option>
<option value="LocalSiteMap">Paikallinen sivukartta</option>
<option value="show" disabled="disabled" class="disabled">------------------------</option>
<option value="RenamePage" disabled="disabled" class="disabled">Uudelleennimeä sivu</option>
<option value="CopyPage">Kopioi sivu</option>
<option value="DeletePage" disabled="disabled" class="disabled">Poista sivu</option>
<option value="show" disabled="disabled" class="disabled">------------------------</option>
<option value="show" disabled="disabled" class="disabled">Tilaa käyttäjälle</option>
<option value="show" disabled="disabled" class="disabled">------------------------</option>
<option value="show" disabled="disabled" class="disabled">Poista roskaviestejä</option>
<option value="show" disabled="disabled" class="disabled">Palauta kyseinen versio</option>
<option value="PackagePages">Paketoi sivuja</option>
<option value="SyncPages">Synkronisoi sivut</option>
<option value="show" disabled="disabled" class="disabled">------------------------</option>
<option value="Load">Lataa</option>
<option value="Save">Tallenna</option>
<option value="SlideShow">SlideShow</option>
    </select>
    
    
</div>

</form>
</li></ul>

<ul id="username">
<li><a href="https://wiki.ubuntu.com/Home">Ubuntu Wiki</a></li>
<li><a href="https://wiki.ubuntu.com/Kernel/Dev/KernelGitGuide?action=login">Kirjaudu sisään</a></li>
<li><a href="https://wiki.ubuntu.com/HelpContents">Help</a></li>
</ul>

        <hr class="clearBoth">
    </div>
    
	<div id="main"> 
		<div id="container">
			<div id="content">
		<h2 class="entry-title"> 
<span><a href="https://wiki.ubuntu.com/Kernel/Dev/KernelGitGuide">KernelGitGuide</a></span>
</h2>
	<div class="hentry post">
               

<div id="page" dir="ltr" lang="en">

<!-- END HEADER --><div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line867"></p><div dir="ltr" id="Kernel.2FMenuBar.content" lang="en"><span class="anchor" id="Kernel.2FMenuBar.top"></span>
<span class="anchor" id="Kernel.2FMenuBar.line-1"></span><span class="anchor" id="Kernel.2FMenuBar.line-2"></span><div><table style="width:100%;"><tbody><tr>  <td style="width: 40px;  border: none;  -moz-border-radius-topleft: 15px ; -moz-border-radius-bottomleft: 15px;  background-color: #F1F1DD;"><p class="line891"><img alt="IconsPage/iconCircle48.png" class="attachment" src="Kernel_Dev_KernelGitGuide%20-%20Ubuntu%20Wiki_tiedostot/IconsPage.png" title="IconsPage/iconCircle48.png"></p></td>
  <td style="width: 20%;  border: none;  -moz-border-radius-topright: 15px; -moz-border-radius-bottomright: 15px;  font-size: 0.90em;  background-color: #F1F1DD;"><p class="line891"><a href="https://wiki.ubuntu.com/Kernel">Ubuntu Kernel Main</a></p></td>
  <td colspan="2" style="border:none; text-align: center"></td>
  <td style="width: 40px;  border: none;  -moz-border-radius-topleft: 15px ; -moz-border-radius-bottomleft: 15px;  background-color: #F1F1DD;"><p class="line891"><img alt="information.png" class="attachment" src="Kernel_Dev_KernelGitGuide%20-%20Ubuntu%20Wiki_tiedostot/MenuBar_003.png" title="information.png"></p></td>
  <td style="width: 20%;  border: none;  -moz-border-radius-topright: 15px; -moz-border-radius-bottomright: 15px;  font-size: 0.90em;  background-color: #F1F1DD;"><p class="line891"><a href="https://wiki.ubuntu.com/Kernel/Debugging">Kernel Debugging</a></p></td>
  <td colspan="2" style="border:none; text-align: center"></td>
  <td style="width: 40px;  border: none;  -moz-border-radius-topleft: 15px ; -moz-border-radius-bottomleft: 15px;  background-color: #F1F1DD;"><p class="line891"><img alt="IconsPage/IconBug.png" class="attachment" src="Kernel_Dev_KernelGitGuide%20-%20Ubuntu%20Wiki_tiedostot/IconsPage_002.png" title="IconsPage/IconBug.png"></p></td>
  <td style="width: 20%;  border: none;  -moz-border-radius-topright: 15px; -moz-border-radius-bottomright: 15px;  font-size: 0.90em;  background-color: #F1F1DD;"><p class="line891"><a href="https://wiki.ubuntu.com/Kernel/BugTriage">Bug Triage</a></p></td>
  <td colspan="2" style="border:none; text-align: center"></td>
  <td style="width: 40px;  border: none;  -moz-border-radius-topleft: 15px ; -moz-border-radius-bottomleft: 15px;  background-color: #F1F1DD;"><p class="line891"><img alt="testing.png" class="attachment" src="Kernel_Dev_KernelGitGuide%20-%20Ubuntu%20Wiki_tiedostot/MenuBar_002.png" title="testing.png"></p></td>
  <td style="width: 20%;  border: none;  -moz-border-radius-topright: 15px; -moz-border-radius-bottomright: 15px;  font-size: 0.90em;  background-color: #F1F1DD;"><p class="line891"><a href="https://wiki.ubuntu.com/Kernel/Dev">Kernel Development</a></p></td>
  <td colspan="2" style="border:none; text-align: center"></td>
  <td style="width: 40px;  border: none;  -moz-border-radius-topleft: 15px ; -moz-border-radius-bottomleft: 15px;  background-color: #F1F1DD;"><p class="line891"><img alt="todo.png" class="attachment" src="Kernel_Dev_KernelGitGuide%20-%20Ubuntu%20Wiki_tiedostot/MenuBar.png" title="todo.png"></p></td>
  <td style="width: 20%;  border: none;  -moz-border-radius-topright: 15px; -moz-border-radius-bottomright: 15px;  font-size: 0.90em;  background-color: #F1F1DD;"><p class="line891"><a href="https://wiki.ubuntu.com/Kernel/FAQ">Frequently Asked Questions</a></p></td>
</tr>
</tbody></table></div><span class="anchor" id="Kernel.2FMenuBar.line-3"></span><span class="anchor" id="Kernel.2FMenuBar.bottom"></span></div> <span class="anchor" id="line-2"></span><div><table style="float:right;  font-size: 0.9em;  width:40%;  background:#F1F1ED;  margin: 0 0 1em 1em;"><tbody><tr>  <td style="padding:0.5em;"><p class="line891"></p><div class="table-of-contents"><p class="table-of-contents-heading">Sisältö</p><ol><li>
<a href="#Current_GIT_Trees">Current GIT Trees</a></li><li>
<a href="#Kernel.2FAction.2FInstallGit.Installing_GIT">Installing GIT</a></li><li>
<a href="#Kernel.2FAction.2FGitTheSource.Obtaining_the_kernel_sources_for_an_Ubuntu_release_using_git">Obtaining the kernel sources for an Ubuntu release using git</a></li><li>
<a href="#Maintaining_local_changes">Maintaining local changes</a></li><li>
<a href="#Pushing_changes_to_the_main_repo">Pushing changes to the main repo</a></li><li>
<a href="#Kernel.2FAction.2FCommitTemplates.Using_Commit_templates">Using Commit templates</a></li><li>
<a href="#Patch_acceptance_criteria">Patch acceptance criteria</a></li><li>
<a href="#Developers_with_access_to_kernel.ubuntu.com">Developers with access to kernel.ubuntu.com</a></li></ol></div></td>
</tr>
</tbody></table></div><span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><p class="line874">Git
 is the source code management tool used by the Linux kernel developer 
community.  Ubuntu has adopted this tool for our own Linux kernel source
 code so that we can interact better with the community and the other 
kernel developers. <span class="anchor" id="line-5"></span><span class="anchor" id="line-6"></span></p><p class="line867">
</p><h2 id="Current_GIT_Trees">Current GIT Trees</h2>
<span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span><p class="line874">All of the current live Ubuntu kernel repositories are at the URL below: <span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span></p><ul><li style="list-style-type:none"><p class="line891"><a class="http" href="http://kernel.ubuntu.com/git-repos/">http://kernel.ubuntu.com/git-repos/</a> <span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span></p></li></ul><p class="line874">There is a tree for each of the currently supported releases as well as any open development and upcoming releases: <span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span></p><ul><li style="list-style-type:none"><div><table><tbody><tr>  <td><p class="line862"> zesty   </p></td>
  <td><p class="line862"> git://kernel.ubuntu.com/ubuntu/ubuntu-zesty.git   </p></td>
</tr>
<tr>  <td><span class="anchor" id="line-15"></span><p class="line862"> yakkety </p></td>
  <td><p class="line862"> git://kernel.ubuntu.com/ubuntu/ubuntu-yakkety.git </p></td>
</tr>
<tr>  <td><span class="anchor" id="line-16"></span><p class="line862"> xenial  </p></td>
  <td><p class="line862"> git://kernel.ubuntu.com/ubuntu/ubuntu-xenial.git  </p></td>
</tr>
<tr>  <td><span class="anchor" id="line-17"></span><p class="line862"> vivid   </p></td>
  <td><p class="line862"> git://kernel.ubuntu.com/ubuntu/ubuntu-vivid.git   </p></td>
</tr>
<tr>  <td><span class="anchor" id="line-18"></span><p class="line862"> trusty  </p></td>
  <td><p class="line862"> git://kernel.ubuntu.com/ubuntu/ubuntu-trusty.git  </p></td>
</tr>
<tr>  <td><span class="anchor" id="line-19"></span><p class="line862"> precise </p></td>
  <td><p class="line862"> git://kernel.ubuntu.com/ubuntu/ubuntu-precise.git </p></td>
</tr>
</tbody></table></div><span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span></li></ul><p class="line862">The
 distro kernel is always on the master branch in these repositories. 
Each release also has a master-next branch containing the commits that 
will go onto the master branch and become the next release for that 
release.  A number of releases also have other <a href="https://wiki.ubuntu.com/KernelTeam/TopicBranches">Topic Branches</a> which represent other related but divergent kernels for other purposes. <span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span></p><p class="line874">If you cannot use the git protocol (perhaps because of a firewall), you can use the slower http protocol.  For example: <span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span></p><ul><li style="list-style-type:none"><div><table><tbody><tr>  <td><p class="line862"> precise </p></td>
  <td><p class="line862"> <a class="http" href="http://kernel.ubuntu.com/git-repos/ubuntu/ubuntu-precise.git">http://kernel.ubuntu.com/git-repos/ubuntu/ubuntu-precise.git</a> </p></td>
</tr>
</tbody></table></div><span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span></li></ul><p class="line862">To find out what else is available try browsing <a class="http" href="http://kernel.ubuntu.com/git">http://kernel.ubuntu.com/git</a> <span class="anchor" id="line-28"></span>and searching for ubuntu). <span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span></p><p class="line867"></p><div dir="ltr" id="Kernel.2FAction.2FInstallGit.content" lang="en"><span class="anchor" id="Kernel.2FAction.2FInstallGit.top"></span>
<span class="anchor" id="Kernel.2FAction.2FInstallGit.line-1"></span><p class="line867">
</p><h2 id="Kernel.2FAction.2FInstallGit.Installing_GIT">Installing GIT</h2>
<span class="anchor" id="Kernel.2FAction.2FInstallGit.line-2"></span><span class="anchor" id="Kernel.2FAction.2FInstallGit.line-3"></span><p class="line862">To use <tt class="backtick">git</tt> you must have the <a class="http" href="http://packages.ubuntu.com/search?keywords=git">git package</a> installed on your system, which you can install like this: <span class="anchor" id="Kernel.2FAction.2FInstallGit.line-4"></span><span class="anchor" id="Kernel.2FAction.2FInstallGit.line-5"></span></p><ul><li style="list-style-type:none"><span class="anchor" id="Kernel.2FAction.2FInstallGit.line-6"></span><span class="anchor" id="Kernel.2FAction.2FInstallGit.line-7"></span><pre><span class="anchor" id="Kernel.2FAction.2FInstallGit.line-1"></span>sudo apt-get install git</pre><span class="anchor" id="Kernel.2FAction.2FInstallGit.line-8"></span><span class="anchor" id="Kernel.2FAction.2FInstallGit.line-9"></span></li></ul><p class="line862">Note if you're running Ubuntu 10.04 LTS (Lucid), you'll instead have to install the <a class="http" href="http://packages.ubuntu.com/search?keywords=git">git-core package</a>. <span class="anchor" id="Kernel.2FAction.2FInstallGit.line-10"></span><span class="anchor" id="Kernel.2FAction.2FInstallGit.bottom"></span></p></div> <span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><p class="line867"></p><div dir="ltr" id="Kernel.2FAction.2FGitTheSource.content" lang="en"><span class="anchor" id="Kernel.2FAction.2FGitTheSource.top"></span>
<span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-1"></span><p class="line867">
</p><h2 id="Kernel.2FAction.2FGitTheSource.Obtaining_the_kernel_sources_for_an_Ubuntu_release_using_git">Obtaining the kernel sources for an Ubuntu release using git</h2>
<span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-2"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-3"></span><p class="line862">All of the Ubuntu Kernel source is maintained under <tt>git</tt>.  The source for each release is maintained in its own git repository on <tt>kernel.ubuntu.com</tt>.  These can be browsed in <a class="http" href="http://kernel.ubuntu.com/git">gitweb</a>, the official Ubuntu trees are in the <tt>ubuntu/</tt> directory. The Ubuntu Linux kernel git repository is located at git://kernel.ubuntu.com/ubuntu/ubuntu-&lt;release&gt;.git or <a class="http" href="http://kernel.ubuntu.com/git-repos/ubuntu/ubuntu-%3Crelease%3E.git">http://kernel.ubuntu.com/git-repos/ubuntu/ubuntu-&lt;release&gt;.git</a>.  To obtain a local copy you can simply git clone the repository for the release you are interested in as below.  The <tt>git</tt> command is part of the <tt>git-core</tt> package: <span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-4"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-5"></span></p><ul><li style="list-style-type:none"><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-6"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-7"></span><pre><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-1"></span>git clone git://kernel.ubuntu.com/ubuntu/ubuntu-&lt;release&gt;.git</pre><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-8"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-9"></span></li></ul><p class="line874">For example to obtain the maverick tree: <span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-10"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-11"></span></p><ul><li style="list-style-type:none"><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-12"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-13"></span><pre><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-1-1"></span>git clone git://kernel.ubuntu.com/ubuntu/ubuntu-maverick.git</pre><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-14"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-15"></span></li></ul><p class="line874">This
 will download several hundred megabytes of data. If you plan on working
 on more than one kernel release you can save space and time by 
downloading the upstream kernel tree.  Note that once these two trees 
are tied together you cannot remove the virgin Linus tree without damage
 to the Ubuntu tree: <span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-16"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-17"></span></p><ul><li style="list-style-type:none"><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-18"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-19"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-20"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-21"></span><pre><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-1-2"></span>git clone git://kernel.ubuntu.com/ubuntu/linux.git
<span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-2"></span>git clone --reference linux git://kernel.ubuntu.com/ubuntu/ubuntu-karmic.git
<span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-3"></span>git clone --reference linux git://kernel.ubuntu.com/ubuntu/ubuntu-maverick.git</pre><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-22"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-23"></span></li></ul><p class="line862">In each case you will end up with a new directory <tt>ubuntu-&lt;release&gt;</tt> containing the source and the full history which can be manipulated using the <tt>git</tt> command from within each directory. <span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-24"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-25"></span></p><p class="line874">By
 default you will have the latest version of the kernel tree, the master
 tree.  You can switch to any previously released kernel version using 
the release tags.  To obtain a full list of the tagged versions in the 
release as below: <span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-26"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-27"></span></p><ul><li style="list-style-type:none"><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-28"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-29"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-30"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-31"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-32"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-33"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-34"></span><pre><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-1-3"></span>$ git tag -l Ubuntu-*
<span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-2-1"></span>Ubuntu-2.6.27-7.10
<span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-3-1"></span>Ubuntu-2.6.27-7.11
<span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-4"></span>Ubuntu-2.6.27-7.12
<span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-5"></span>Ubuntu-2.6.27-7.13
<span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-6"></span>Ubuntu-2.6.27-7.14
<span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-7"></span>$</pre><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-35"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-36"></span></li></ul><p class="line862">To look at the <tt>2.6.27-7.13</tt> version you can simply checkout a new branch pointing to that version: <span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-37"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-38"></span></p><ul><li style="list-style-type:none"><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-39"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-40"></span><pre><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-1-4"></span>git checkout -b temp Ubuntu-2.6.27-7.13</pre><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-41"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-42"></span></li></ul><p class="line874">You may then manipulate the release for example adding new commits. <span class="anchor" id="Kernel.2FAction.2FGitTheSource.line-43"></span><span class="anchor" id="Kernel.2FAction.2FGitTheSource.bottom"></span></p></div> <span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><p class="line867">
</p><h2 id="Maintaining_local_changes">Maintaining local changes</h2>
<span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><p class="line874">During development, the kernel git repository is being constantly rebased <span class="anchor" id="line-37"></span>against Linus' tree. IOW, Ubuntu specific changes are not being <em>merged</em>, <span class="anchor" id="line-38"></span>but rather popped off, the tree updated to mainline, and then the Ubuntu <span class="anchor" id="line-39"></span>specific changes reapplied; they are rebased.  There are two ways to track <span class="anchor" id="line-40"></span>the kernel git tree, depending on whether you have local changes or not: <span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span></p><p class="line867"><strong>No Local Changes</strong> <span class="anchor" id="line-43"></span></p><ul><li style="list-style-type:none"><span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><pre><span class="anchor" id="line-1"></span>git fetch
<span class="anchor" id="line-2"></span>git reset --hard origin/master</pre><span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span></li></ul><p class="line867"><strong>Preserve Local Changes</strong> <span class="anchor" id="line-49"></span></p><ul><li style="list-style-type:none"><span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><pre><span class="anchor" id="line-1-1"></span>git fetch
<span class="anchor" id="line-2-1"></span>git rebase --onto origin/master origin/master@{1}</pre><span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span></li></ul><p class="line867">
</p><h2 id="Pushing_changes_to_the_main_repo">Pushing changes to the main repo</h2>
<span class="anchor" id="line-56"></span><p class="line862">Since the main repo is not publicly writable, the primary means for sending patches to the kernel team is using <em>git format-patch</em>. The output from this command can then be sent to the <a class="mailto" href="mailto:kernel-team@lists.ubuntu.com">kernel-team</a> mailing list. <span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span></p><p class="line862">Alternatively, if you have a publicly available git repository for which changes can be pulled from, you can use <em>git request-pull</em> to generate an email message to send to the <a class="mailto" href="mailto:kernel-team@lists.ubuntu.com">kernel-team</a> mailing list. <span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span></p><p class="line867"></p><div dir="ltr" id="Kernel.2FAction.2FCommitTemplates.content" lang="en"><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.top"></span>
<span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-1"></span><p class="line867">
</p><h2 id="Kernel.2FAction.2FCommitTemplates.Using_Commit_templates">Using Commit templates</h2>
<span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-2"></span><p class="line862">In <em>debian/commit-templates/</em>
 in the source tree there are several templates that should be used when
 committing changes that you expect to be integrated with the Ubuntu 
kernel repo.  The commit templates contain comments for how to fill out 
the required information.  Also note that all commits must have a 
Signed-off-by line (the "-s" option to <tt>git&nbsp;commit</tt>). A typical <tt>git&nbsp;commit</tt> command will look like: <span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-3"></span><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-4"></span></p><ul><li style="list-style-type:none"><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-5"></span><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-6"></span><pre><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-1"></span>git commit -s -F debian/commit-templates/patch -e</pre><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-7"></span></li></ul><p class="line862">Note
 that the -e (edit) option must follow the -F option, else git will not 
let you edit the commit-template before committing.  The primary one you
 will use is the <em>patch</em> template. It is commented heavily, so should be self explanatory.  Some templates do not require editing such as the <em>bumpabi</em> and <em>updateconfigs</em> templates.  An example commit log will look like this: <span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-8"></span></p><ul><li style="list-style-type:none"><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-9"></span><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-10"></span><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-11"></span><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-12"></span><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-13"></span><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-14"></span><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-15"></span><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-16"></span><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-17"></span><pre><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-1-1"></span>UBUNTU: scsi: My cool change to the scsi subsystem
<span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-2"></span>
<span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-3"></span>UpstreamStatus: Merged with 2.6.15-rc3
<span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-4"></span>
<span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-5"></span>My cool change to the scsi subsystem makes scsi transfers increase
<span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-6"></span>magically to 124GiB/sec.
<span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-7"></span>
<span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-8"></span>Signed-off-by: Joe Cool Hacker &lt;jch@ubuntu.com&gt;</pre><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-18"></span><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-19"></span></li></ul><p class="line874">The
 first line is critical and should summarise the change.  The prefix for
 the line defines the type of the commit (see below).  The last line 
should contain your sign-off for the patch and any acks it has received.
  The remainder of the text should concisely describe the change.  <span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-20"></span><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-21"></span></p><ul><li style="list-style-type:none"><div><table><tbody><tr>  <td><p class="line891"><em>Prefix</em></p></td>
  <td><p class="line891"><em>Meaning</em></p></td>
</tr>
<tr>  <td><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-22"></span><p class="line862"> UBUNTU: SAUCE: </p></td>
  <td><p class="line862"> a kernel source modification which is specific to Ubuntu </p></td>
</tr>
<tr>  <td><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-23"></span><p class="line862"> UBUNTU: [Config] </p></td>
  <td><p class="line862"> a change to the kernel configuration </p></td>
</tr>
<tr>  <td><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-24"></span><p class="line862"> UBUNTU: </p></td>
  <td><p class="line862"> any other change to the debian packaging for the kernel </p></td>
</tr>
<tr>  <td><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-25"></span><p class="line862"> &lt;none&gt; </p></td>
  <td><p class="line862"> upstream kernel patches </p></td>
</tr>
</tbody></table></div><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.line-26"></span></li></ul><span class="anchor" id="Kernel.2FAction.2FCommitTemplates.bottom"></span></div> <span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span><p class="line867">
</p><h2 id="Patch_acceptance_criteria">Patch acceptance criteria</h2>
<span class="anchor" id="line-63"></span><p class="line874">In general, 
Ubuntu will apply the same criteria applicable to upstream kernel. Here 
is a checklist of reading and tools related to posting kernel patches: <span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span></p><ul><li><p class="line891">&lt;kernel-directory&gt;/Documentation/SubmittingPatches <span class="anchor" id="line-66"></span></p></li><li><p class="line891">&lt;kernel-directory&gt;/scripts/checkpatch.pl <span class="anchor" id="line-67"></span></p></li><li><p class="line891">&lt;kernel-directory&gt;/scripts/cleanpatch <span class="anchor" id="line-68"></span></p></li><li><p class="line891">&lt;kernel-directory&gt;/scripts/cleanfile <span class="anchor" id="line-69"></span></p></li><li><p class="line891">&lt;kernel-directory&gt;/scripts/Lindent <span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span></p></li></ul><p class="line862">If you are creating a new file, it is helpful to run it through <em>cleanfile</em> and/or <em>Lindent</em> before creating a patch<br>
 <span class="anchor" id="line-72"></span>If you have generated a patch, it helps running it through <em>checkpatch.pl</em> and <em>cleanpatch</em> if necessary<br>
 <span class="anchor" id="line-73"></span>Also, using the commit template described above is a good idea for Ubuntu-specific patches <span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span></p><p class="line867">
</p><h2 id="Developers_with_access_to_kernel.ubuntu.com">Developers with access to kernel.ubuntu.com</h2>
<span class="anchor" id="line-76"></span><p class="line862">The kernel team has a <em>git</em> repo located on <em>kernel.ubuntu.com</em> (AKA zinc.ubuntu.com) in /srv/kernel.ubuntu.com/git/ubuntu. <span class="anchor" id="line-77"></span><span class="anchor" id="line-78"></span></p><p class="line874">You can, if you want, create a clone for yourself in your directory, and just have your changes pulled when ready. <span class="anchor" id="line-79"></span><span class="anchor" id="line-80"></span></p><p class="line874">Suggested way to do this: <span class="anchor" id="line-81"></span><span class="anchor" id="line-82"></span></p><ul><li style="list-style-type:none"><span class="anchor" id="line-83"></span><span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><span class="anchor" id="line-86"></span><span class="anchor" id="line-87"></span><pre><span class="anchor" id="line-1-2"></span>git clone -l -n -s --bare /srv/kernel.ubuntu.com/git/ubuntu/ubuntu-jaunty.git
<span class="anchor" id="line-2-2"></span>vi ubuntu-jaunty.git/description
<span class="anchor" id="line-3"></span>( give it a descriptive name )
<span class="anchor" id="line-4"></span>mv ubuntu-jaunty.git/ /srv/kernel.ubuntu.com/git/&lt;user&gt;/my-git-tree.git</pre><span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span></li></ul><p class="line862">You can now push your changes to this tree via <strong>ssh</strong>. Note the <strong>-l -n -s</strong> options do a few special things, mainly making your repo share objects with ours (saves space). <span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span></p><p class="line862">Now you need to run <em>git update-server-info</em> in your tree so that it is available over http transport <span class="anchor" id="line-92"></span></p><ul><li style="list-style-type:none"><span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span><pre><span class="anchor" id="line-1-3"></span>cd /srv/kernel.ubuntu.com/git/&lt;user&gt;/my-git-tree.git
<span class="anchor" id="line-2-3"></span>git update-server-info
<span class="anchor" id="line-3-1"></span>mv hooks/post-update.sample hooks/post-update
<span class="anchor" id="line-4-1"></span>chmod +x hooks/post-update</pre><span class="anchor" id="line-98"></span></li></ul><p class="line874">For older versions of git instead of using the post-update hook use <span class="anchor" id="line-99"></span></p><ul><li style="list-style-type:none"><span class="anchor" id="line-100"></span><span class="anchor" id="line-101"></span><pre><span class="anchor" id="line-1-4"></span>chmod +x /srv/kernel.ubuntu.com/git/&lt;user&gt;/my-git-tree.git/hooks/post-commit</pre><span class="anchor" id="line-102"></span><span class="anchor" id="line-103"></span></li></ul><p class="line874">To
 work on your branch, now clone to your local machine from the same 
origin tree (not the tree you just created on zinc -- this is only for 
pushing to): <span class="anchor" id="line-104"></span><span class="anchor" id="line-105"></span></p><ul><li style="list-style-type:none"><span class="anchor" id="line-106"></span><span class="anchor" id="line-107"></span><span class="anchor" id="line-108"></span><span class="anchor" id="line-109"></span><span class="anchor" id="line-110"></span><pre><span class="anchor" id="line-1-5"></span>git clone git://kernel.ubuntu.com/ubuntu/ubuntu-jaunty.git my-tree
<span class="anchor" id="line-2-4"></span>git remote add zinc ssh://kernel.ubuntu.com/srv/kernel.ubuntu.com/git/&lt;user&gt;/my-git-tree.git
<span class="anchor" id="line-3-2"></span>&lt;do work&gt;
<span class="anchor" id="line-4-2"></span>git push zinc master</pre><span class="anchor" id="line-111"></span><span class="anchor" id="line-112"></span></li></ul><p class="line874">Suggested method for keeping this tree synced with the ubuntu tree, instead of git pull, is to do: <span class="anchor" id="line-113"></span><span class="anchor" id="line-114"></span></p><ul><li style="list-style-type:none"><span class="anchor" id="line-115"></span><span class="anchor" id="line-116"></span><span class="anchor" id="line-117"></span><span class="anchor" id="line-118"></span><pre><span class="anchor" id="line-1-6"></span>cd my-tree
<span class="anchor" id="line-2-5"></span>git fetch origin
<span class="anchor" id="line-3-3"></span>git rebase origin</pre><span class="anchor" id="line-119"></span><span class="anchor" id="line-120"></span></li></ul><p class="line862">This
 will keep your changes on top of the original tree (as opposed to being
 merged). This is also a good idea because during development (e.g. 
while following the upstream git repo), we frequently rebase to 
linux-2.6.git upstream, so the <strong>HEAD</strong> is not always suitable for pull/merge. <span class="anchor" id="line-121"></span><span class="anchor" id="bottom"></span></p></div> <!-- BEGIN FOOTER -->
<div id="pagebottom"></div>
</div>


        <div class="entry-utility"> 
            <span class="cat-links">
<p id="pageinfo" class="info" dir="ltr" lang="fi">Kernel/Dev/KernelGitGuide  (viimeksi muuttanut <span title="cypressyew @ localhost[127.0.0.1]"><a class="interwiki" href="https://launchpad.net/~cypressyew" title="cypressyew @ localhost[127.0.0.1]">cypressyew</a></span>, ajankohta 2016-11-25 12:57:58)</p>

</span> 
        </div> 
    </div><!-- .post --> 
 
            </div><!-- #content --> 
        </div><!-- #container --> 
        <div class="clearBoth"></div> 
    </div><!-- #main --> 
</div><!-- #wrapper .hfeed --> 
    
<div id="footer"> 
    <div id="siteinfo">        
        <p> The material on this wiki is available under a free license, see 
	<a href="https://help.ubuntu.com/community/License">Copyright / License</a> for details.
        </p> 
    </div><!-- #siteinfo --> 
</div><!-- #footer  --> 



</body></html>